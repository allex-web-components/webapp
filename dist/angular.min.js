angular.module("allex_applib",[]),angular.module("allex_applib",[]),function(a,b,c,d){"use strict";function e(a){h.call(this,a)}function f(a){e.call(this,a),this.data=null}var g=a.lib,h=g.BasicAngularController;g.inherit(e,h),e.prototype.__cleanUp=function(){h.prototype.__cleanUp.call(this)},e.prototype.elementReady=function(a){var b=a.data("allex_element");if(!b)throw new Error("Missing allex element ...");b.set("$scopectrl",this)},g.inherit(f,e),f.prototype.__cleanUp=function(){this.data=null,e.prototype.__cleanUp.call(this)},f.prototype.set_data=function(a){return this.data===a?!1:(this.data=a,!0)},b.abstractions.AngularDataAwareController=f,b.abstractions.BasicAngularElementController=e}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,angular.module("allex_applib")),function(a,b,c,d){"use strict";function e(a,b){g.call(this,a,b),this.$scopectrl=null}var f=a.lib,g=(f.BasicAngularController,b.abstractions.WebElement);f.q;f.inherit(e,g),e.prototype.__cleanUp=function(){this.$scopectrl=null,g.prototype.__cleanUp.call(this)},e.prototype.set_$scopectrl=function(a){this.$scopectrl=a,this._onScope(a)},e.prototype.getMeAsElement=function(){return this.$element},e.prototype.initialize=function(){g.prototype.initialize.call(this),this.$element.data("allex_element",this)},e.prototype._onScope=f.dummyFunc,b.elements.BasicAngularElement=e}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,angular.module("allex_applib")),function(a,b,c,d){"use strict";function e(a,b){j.call(this,a,b),i.call(this)}function f(a){h.call(this,a),this.data=null}var g=a.lib,h=b.abstractions.AngularDataAwareController,i=b.mixins.DataElementMixIn,j=b.elements.BasicAngularElement;g.q;g.inherit(e,j),i.addMethods(e),e.prototype.__cleanUp=function(){i.prototype.__cleanUp.call(this),j.prototype.__cleanUp.call(this)},e.prototype.initialize=function(){j.prototype.initialize.call(this),this.$element.attr("data-allex-active-dom","")},b.elements.ActiveDOM=e,c.registerElementType("ActiveDOM",e),g.inherit(f,h),f.prototype.__cleanUp=function(){this.data=null,h.prototype.__cleanUp.call(this)},d.controller("allexActiveDomController",["$scope",function(a){new f(a)}]),d.directive("allexActiveDom",[function(){return{restrict:"A",scope:!0,controller:"allexActiveDomController",link:function(a,b,c){a._ctrl.elementReady(b)}}}])}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,angular.module("allex_applib")),function(a,b,c,d){"use strict";function e(a,b){i.call(this,a,b),this.submit=new g.HookCollection,this.valid=null,this._valid_l=null}function f(a){h.call(this,a),this.data={},this.valid=!1,this._watcher=null}var g=a.lib,h=b.abstractions.BasicAngularElementController,i=b.elements.BasicAngularElement;g.q;g.inherit(e,i),e.prototype.__cleanUp=function(){this._valid_l&&this._valid_l.destroy(),this._valid_l=null,this.submit.destroy(),this.submit=null,this.valid=!1,i.prototype.__cleanUp.call(this)},e.prototype.set_actual=function(a){i.prototype.set_actual.call(this,a)},e.prototype.initialize=function(){i.prototype.initialize.call(this),this.$element.attr({"data-allex-form-logic":""});var a=this.$element.is("form")?this.$element:this.$element.find("form");a.attr({name:this.get("id"),novalidate:""})},e.prototype.fireSubmit=function(){this.submit.fire(this.$scopectrl.data)},e.prototype.set_data=function(a){this.$scopectrl.set("data",a)},e.prototype.get_data=function(){return this.$scopectrl.get("data")},e.prototype._onScope=function(a){this._valid_l=a.attachListener("valid",this.set.bind(this,"valid"))},e.prototype.set_valid=function(a){return this.valid===a?!1:(console.log("FormLogic will say valid",a),this.valid=a,!0)},b.elements.FormLogic=e,c.registerElementType("FormLogic",e),g.inherit(f,h),f.prototype.__cleanUp=function(){this._watcher&&this._watcher(),this._watcher=null,this.data=null,this.valid=null,h.prototype.__cleanUp.call(this)},f.prototype.elementReady=function(a){h.prototype.elementReady.call(this,a),this._watcher=this.scope.$watch(a.attr("id")+".$valid",this.set.bind(this,"valid"))},f.prototype.set_valid=function(a){return this.valid===a?!1:(this.valid=a,!0)},d.controller("allexFormLogicController",["$scope",function(a){new f(a)}]),d.directive("allexFormLogic",function(){return{restrict:"A",scope:!0,controller:"allexFormLogicController",link:function(a,b,c){a._ctrl.elementReady(b)}}})}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,angular.module("allex_applib")),function(a,b,c,d){"use strict";function e(a,b){l.call(this,a,b),k.call(this),this.afterEdit=new i.HookCollection,this.config.grid.data||(this.config.grid.data="_ctrl.data")}function f(a){return a.enableCellEdit?!0:void 0}function g(a,b){j.call(this,a),m.call(this),this.data=null,this.gridOptions=null,this.raise=null,this.api=null,this._parse=b,this._getActualData=null,this._listenToEditEvents=!1}function h(a){return a}var i=a.lib,j=b.abstractions.AngularDataAwareController,k=b.mixins.DataElementMixIn,l=b.elements.BasicAngularElement,m=i.CBMapable;i.q;i.inherit(e,l),k.addMethods(e),e.prototype.__cleanUp=function(){this.afterEdit.destroy(),this.afterEdit=null,k.prototype.__cleanUp.call(this),l.prototype.__cleanUp.call(this)},e.prototype.initialize=function(){l.prototype.initialize.call(this);var a=i.traverseConditionally(this.getConfigVal("grid.columnDefs"),f),b=$('<div class="table_container"></div>');b.attr("ui-grid","_ctrl.gridOptions"),a&&b.attr("ui-grid-edit",""),b.addClass("grid"),this.$element.attr({"data-allex-data-table":""}),this.$element.append(b);var c=this.findDomReference("actions");0!==c.length&&this.config.grid.columnDefs.unshift({displayName:c.attr("data-title")||"Actions",cellTemplate:c.html(),field:"-"})},e.prototype._onScope=function(a){var b={appendNewRow:this.appendNewRow.bind(this)};""===this.$element.find(".grid.table_container").attr("ui-grid-edit")&&(b.afterEdit=this.afterEdit.fire.bind(this.afterEdit)),a.set("_cbmap",b),a.set("gridOptions",this.config.grid),a.set("raise",this.$element.trigger.bind(this.$element))},e.prototype.appendNewRow=function(a){var b={};this.getConfigVal("config.bSetNewRowProps");var c=this.getConfigVal("config.fAppendNewRow");return c?c(a,b):b},e.prototype.get_rows=function(){return this.$scopectrl.api?this.$scopectrl.api.grid.rows:null},e.prototype.getElement=function(a){return"$element"===a?this.$element:l.prototype.getElement.call(this,a)},e.prototype.set_actual=function(a){var b=l.prototype.set_actual.call(this,a),c=$(window);return i.runNext(c.resize.bind(c),300),b},e.prototype.set_row_count=function(a){return this.$scopectrl.set("row_count",a)},e.prototype.get_row_count=function(){return this.$scopectrl.get("row_count")},b.elements.DataTable=e,c.registerElementType("DataTable",e),i.inherit(g,j),m.addMethods(g),g.prototype.__cleanUp=function(){this._getActualData=null,this._parse=null,this.rowCountChanged.destroy(),this.rowCountChanged=null,this.editDone=new i.HookCollection,this.gridOptions=null,this.data=null,this.raise=null,this.api=null,m.prototype.__cleanUp.call(this),j.prototype.__cleanUp.call(this)},g.prototype.set_gridOptions=function(a){return this.gridOptions===a?!1:(this.api=null,this.gridOptions=a,this.gridOptions?(this.gridOptions.onRegisterApi=this.set.bind(this,"api"),void(i.isString(this.gridOptions.data)?this._getActualData=this._parse(this.gridOptions.data).bind(null,this.scope):this._getActualData=h.bind(null,this.gridOptions.data))):!0)},g.prototype.set_api=function(a){this.api!==a&&(this.api=a,this._cbmap&&this._cbmap.afterEdit&&this.api.edit.on.afterCellEdit(this.scope,this._onAfterEdit.bind(this)))},g.prototype._onAfterEdit=function(a,b,c,d){d!==c&&this.call_cb("afterEdit",[{newValue:c,oldValue:d,row:a,field:b.name}])},g.prototype.raiseEvent=function(a,b){this.raise(a,b)},g.prototype.set_row_count=function(a){if(!this._getActualData)return!1;var b=this._getActualData();if(!i.isArray(b))return!1;var c=b.length,d=null;if(a===c)return!1;if(c>a)b.splice(a,c-a);else for(;b.length<a;)d=this.call_cb("appendNewRow",[b.length]),console.log("will append new row ...",d),b.push(d);return!0},g.prototype.get_row_count=function(){if(!this._getActualData)return null;var a=this._getActualData();return i.isArray(a)?a.length:null},d.controller("allexDataTableController",["$scope","$parse",function(a,b){new g(a,b)}]),d.directive("allexDataTable",[function(){return{restrict:"A",scope:!0,controller:"allexDataTableController",link:function(a,b,c){a._ctrl.elementReady(b)}}}])}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,angular.module("allex_applib")),function(a,b,c,d,e){"use strict";function f(a,b){h.call(this,a),this._dependentElements=new g.Map,b.ready(this._onReady.bind(this))}var g=a.lib,h=c.BasicResourceLoader,i=g.q;g.inherit(f,h),f.prototype.__cleanUp=function(){this._dependentElements.destroy(),this._dependentElements=null,h.prototype.__cleanUp.call(this)},f.prototype.load=function(){return i.resolve("ok")},f.prototype._onReady=function(a){var b=this.getConfigVal("angular_dependencies");b?b.indexOf("allex_applib")<0&&b.push("allex_applib"):b=["allex_applib"],d.module("AllexActiveApp",b),d.bootstrap(document,["AllexActiveApp"])},f.prototype.DEFAULT_CONFIG=function(){return{angular_dependencies:["allex_applib"]}},f.prototype.registerDependentElement=function(a){this._dependentElements.add(a.get("id"))},f.prototype.dependentElementReady=function(a){this._dependentElements.remove(a.get("id"))},b.resources.AngularBootstrapper=f,c.registerResourceType("AngularBootstrapper",f)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,angular,jQuery);