!function(a,b,c){"use strict";function d(a,b){l.call(this,a,b),this.name=b,this.listener=null}function e(a,b){l.call(this,a,b),this.name=b,this.listener=null}function f(a,b){m.call(this,a,b);var c=b.split(".");this.method="class"===c[0]?"addClass":c[0],this.removeMethod=this._chooseRemover(),this.prop=c[1]}function g(a){m.call(this,a,this.propertyName)}function h(a){g.call(this,a)}function i(a){g.call(this,a)}function j(a){g.call(this,a)}var k=a.lib,l=c.eventEmitterHandlingRegistry.EventEmitterHandler,m=c.propertyTargetHandlingRegistry.PropertyTargetHandler;k.inherit(d,l),d.prototype.destroy=function(){this.listener&&this.emitter.off(this.name,this.listener),this.listener=null,this.name=null,l.prototype.destroy.call(this)},d.prototype.raiseEvent=function(){this.emitter.trigger.call(this.emitter,this.name,Array.prototype.slice.call(arguments))},d.prototype.listenToEvent=function(a){if(!this.listener)return this.listener=a,"change"===this.name?this.emitter.on(this.name,this._handleChange.bind(this,a)):this.emitter.on(this.name,a),this},d.prototype._handleChange=function(a,b){a(jQuery(b.target).val())},d.recognizer=function(a){if(a&&a.emitter&&a.emitter.is&&a.emitter.is("input")&&k.isFunction(a.emitter.on)&&k.isFunction(a.emitter.off)&&k.isFunction(a.emitter.bind)&&k.isFunction(a.emitter.unbind)&&k.isFunction(a.emitter.trigger))return d},c.eventEmitterHandlingRegistry.register(d.recognizer),k.inherit(e,l),e.prototype.destroy=function(){this.listener&&this.emitter.off(this.name,this.listener),this.listener=null,this.name=null,l.prototype.destroy.call(this)},e.prototype.raiseEvent=function(){this.emitter.trigger.call(this.emitter,this.name,Array.prototype.slice.call(arguments))},e.prototype.listenToEvent=function(a){if(!this.listener)return this.listener=a,this.emitter.on(this.name,a),this},e.recognizer=function(a){if(a&&a.emitter&&k.isFunction(a.emitter.on)&&k.isFunction(a.emitter.off)&&k.isFunction(a.emitter.bind)&&k.isFunction(a.emitter.unbind)&&k.isFunction(a.emitter.trigger))return e},c.eventEmitterHandlingRegistry.register(e.recognizer),k.inherit(f,m),f.prototype.destroy=function(){this.removeMethod=null,this.method=null,this.prop=null,this.method=null,m.prototype.destroy.call(this)},f.prototype._chooseRemover=function(){switch(this.method){case"attr":return"removeAttr";case"class":return"removeClass";case"prop":return"removeProp";case"css":return"css"}},f.prototype.handle=function(a){this.carrier[k.isUndef(a)?this.removeMethod:this.method](this.prop,a)},f.recognizer=function(a){var b=a.name.split(".");if("attr"===b[0]||"css"===b[0]||"prop"===b[0]||"class"===b[0])return a&&a.carrier&&k.isFunction(a.carrier.on)&&k.isFunction(a.carrier.off)&&k.isFunction(a.carrier.bind)&&k.isFunction(a.carrier.unbind)&&k.isFunction(a.carrier.trigger)?f:void 0},c.propertyTargetHandlingRegistry.register(f.recognizer),k.inherit(g,m),g.prototype.handle=function(a){this.carrier[this.propertyName](a)},k.inherit(h,g),h.prototype.propertyName="val",h.recognizer=function(a){if("val"===a.name)return h},c.propertyTargetHandlingRegistry.register(h.recognizer),k.inherit(i,g),i.prototype.propertyName="text",i.recognizer=function(a){if("text"===a.name)return i},c.propertyTargetHandlingRegistry.register(i.recognizer),k.inherit(j,g),j.prototype.propertyName="html",j.recognizer=function(a){if("html"===a.name)return j},c.propertyTargetHandlingRegistry.register(j.recognizer)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_applib,ALLEX.WEB_COMPONENTS.allex_applinkinglib),function(a,b,c,d){"use strict";function e(a,b){g.call(this,a,b),this.$element=null,this._addHook("onPreShow"),this._addHook("onPreHide"),this._addHook("onShown"),this._addHook("onHidden"),this._helpers=null;var c=this.getConfigVal("helperObjects");for(var d in c)this.assignHelperObj(d,c[d])}var f=a.lib,g=c.BasicElement;c.resourceFactory,f.q;f.inherit(e,g),e.prototype.__cleanUp=function(){this._helpers&&(f.container.destroyAll(this._helpers),this._helpers.destroy()),this._helpers=null,this.$element=null,g.prototype.__cleanUp.call(this)},e.prototype.assignHelperObj=function(a,b){this._helpers||(this._helpers=new f.Map),this._helpers.add(a,b)},e.prototype.getHelperObj=function(a){return this._helpers.get(a)},e.prototype.initialize=function(){if(g.prototype.initialize.call(this),this.$element=d("#"+this.get("id")),!this.$element||!this.$element.length)throw new Error("Unable to find DOM element "+this.get("id"));this.fireInitializationDone(),this.attachHook("onPreShow",this.getConfigVal("onPreShow")),this.attachHook("onPreHide",this.getConfigVal("onPreHide")),this.attachHook("onShown",this.getConfigVal("onShown")),this.attachHook("onHidden",this.getConfigVal("onHidden")),this.set_actual(!!this.get("actual"))},e.prototype.set_actual=function(a){return this.$element||(this.actual=a),g.prototype.set_actual.call(this,a)},e.prototype.onUnloaded=function(){this.hide()},e.prototype.onLoaded=function(){this.get("actual")&&this.show()},e.prototype.onLoadFailed=function(){},e.prototype.onLoadProgress=function(){},e.prototype.set_loaded=function(a){if(this.loaded==a)return!1;var b=this.loaded;return this.loaded=a,!a&&b&&this.unload(),!0},e.prototype.resetElement=function(a){var b=this.getConfigVal("reset");f.isFunction(b)&&b(this,a)},e.prototype.show=function(){if(this.$element){this.fireHook("onPreShow",[this]);var a=this.getConfigVal("visible_class"),b=this.getConfigVal("show_jq_function");if(a&&this.$element.addClass(a),b){if(f.isString(b)&&this.$element[b](),f.isArray(b)){var c=b[0];this.$element[c].apply(this.$element,b.slice(1))}}else this.$element.show();this.fireHook("onShown",[this])}},e.prototype.hide=function(){if(this.$element){this.fireHook("onPreHide",[this]);var a=this.getConfigVal("visible_class"),b=this.getConfigVal("hide_jq_function");if(a&&this.$element.removeClass(a),b){if(f.isString(b)&&this.$element[b](),f.isArray(b)){var c=b[0];this.$element[c].apply(this.$element,b.slice(1))}}else this.$element.hide();this.fireHook("onHidden")}},e.prototype.getElement=function(a){var b,c;if(0===a.indexOf("$element.")&&(c=a.replace("$element.","")),0===a.indexOf(".$element.")&&(c=a.replace(".$element.","")),c&&(b=this.$element.find(c)),b){if(0===b.length)throw new f.Error("JQUERY_FIND_FAILED","jQuery could not find "+c);return b}return a=a.replace(/^\./,""),"$element"===a?this.$element:"."===a?this.getMeAsElement():this.childAtPath(a)},e.prototype.findById=function(a){return"$element"===a?this.$element:g.prototype.findById.call(this,a)},e.prototype.getMeAsElement=function(){return this},e.prototype.findDomReference=function(a){if(!a)throw new Error("No type given");var b=this.id;return jQuery("#references #references_"+b+" #references_"+b+"_"+a)},e.prototype.raiseEvent=function(){this.$element.trigger.apply(this.$element,arguments)},e.ResourcesSchema={type:"array",items:{type:"object",properties:{type:{type:"string"},name:{type:"string"},options:{type:"object"}},additionalProperties:!1,required:["type","name"]}},b.elements.WebElement=e,c.registerElementType("WebElement",e)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(a,b,c){"use strict";function d(a){h.call(this,a),this.zl=null}var e=a.lib,f=e.qlib,g=e.q,h=c.BasicResourceLoader,i={type:"object",properties:{url:{type:"string"},extractor:{type:"string"},ispermanent:{type:"boolean"}},required:["url"]};e.inherit(d,h),d.prototype.__cleanUp=function(){h.prototype.__cleanUp.call(this)},d.prototype.doLoad=function(){var a=g.defer(),b=this.getConfigVal("extractor"),c=ALLEX.WEB_COMPONENTS["allex_vektr.imageanimations"].ZipLoader;this.zl=new c(b?new RegExp(b):null);var d=this.zl.load(this.getConfigVal("url"));return f.promise2defer(d,a),a},d.prototype.doUnload=function(){var a=g.defer();return this.zl.destroy(),this.zl=null,a},d.prototype.CONFIG_SCHEMA=function(){return i},d.prototype.DEFAULT_CONFIG=function(){return null},d.prototype.get=function(a){return this.zl?this.zl.result.get(a):null},d.prototype.loadOnDemand=function(){return!0},b.resources.AnimatedImageZipLibrary=d,c.registerResourceType("AnimatedImageZipLibrary",d)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib),function(a,b,c,d){"use strict";function e(a){if(g.call(this,f.extend({},a,{ispermanent:!0})),!window.WebFont)throw new Error("No WebFont component loaded, unable to load resource")}var f=a.lib,g=c.BasicResourceLoader,h=f.q,i={type:"object",properties:{urls:{type:"array",items:{type:"string"}},families:{type:"array",items:{type:"string"}},ispermanent:{type:"boolean"}}};f.inherit(e,g),e.prototype.__cleanUp=function(){g.prototype.__cleanUp.call(this)},e.prototype.CONFIG_SCHEMA=function(){return i},e.prototype.DEFAULT_CONFIG=function(){return null},e.prototype.doLoad=function(){var a=h.defer();return d(document).ready(this._go.bind(this,a)),a},e.prototype._go=function(a){WebFont.load({custom:{families:this.getConfigVal("families"),urls:this.getConfigVal("urls")},active:a.resolve.bind(a,"ok")})},b.resources.FontLoader=e,c.registerResourceType("FontLoader",e)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(a,b,c){function d(a){f.call(this,a)}var e=a.lib,f=c.BasicResourceLoader,g=e.q,h={type:"object",properties:{url:{type:"string"}},required:["url"]};e.inherit(d,f),d.prototype.__cleanUp=function(){f.prototype.__cleanUp.call(this)},d.prototype.doLoad=function(){var a=g.defer();return a.resolve(!0),a},d.prototype.DEFAULT_CONFIG=function(){return null},d.prototype.CONFIG_SCHEMA=function(){return h},d.prototype.getFullUrl=function(a,b){var c=this.getConfigVal("url");return c="/"===c.charAt(c.length)?c+a:c+"/"+a},c.registerResourceType("URLGenerator",d)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib),function(a,b,c){"use strict";function d(){this.data=null,this.busy=!1}var e=a.lib;e.BasicAngularController,e.q;d.prototype.__cleanUp=function(){this.data=null,this.busy=null},d.prototype.set_data=function(a){var b=this.getConfigVal("dataHandler");return e.isFunction(b)?b(this.$element,a):this.data!==a&&(this.data=a,!0)},d.prototype.hasDataChanged=function(a){return e.isUndef(a)||a===!0},d.prototype.set_busy=function(a){this.busy=a,console.log(this.get("id"),"reported busy",a)},d.addMethods=function(a){e.inheritMethods(a,d,"set_data","hasDataChanged","set_busy")},b.mixins.DataElementMixIn=d}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib),function(a,b,c){"use strict";function d(a,b){f.call(this,a,b),g.call(this)}var e=a.lib,f=b.elements.WebElement,g=b.mixins.DataElementMixIn;e.inherit(d,f),g.addMethods(d),d.prototype.__cleanUp=function(){g.prototype.__cleanUp.call(this),f.prototype.__cleanUp.call(this)},b.elements.DataAwareElement=d,c.registerElementType("DataAwareElement",d)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib),function(a,b,c,d){"use strict";function e(a,b){this.container=a,this.desc=b,this.prepareData=b.prepareData||null,this.defer=null}function f(a,b,c){e.call(this,a,c),this.ftion=b,k.isFunction(this.prepareData)||(this.prepareData=this._defaultDataPrepare.bind(this))}function g(a,b,c){e.call(this,a,c),this.element=b}function h(a,b){l.call(this,a,b),this.items=null,this.values=null,this.index=null}function i(a){m.call(this,a)}function j(){n.call(this)}var k=a.lib,l=c.BasicElement,m=c.BasicModifier,n=c.BasicProcessor,o=c.misc,p=k.q;e.prototype.destroy=function(){this.prepareData=null,this.desc=null,this.container=null,this.defer=null},e.prototype.isExpecting=function(){return!!this.defer},e.prototype._actualStart=function(a){var b=this._doStart(a);return b.done(this.doOnSuccess.bind(this),this.doOnError.bind(this)),b},e.prototype._onPrepareDataFunction=function(a){return a().then(this._actualStart.bind(this))},e.prototype._onPrepareDataPromise=function(a){return a.then(this._actualStart.bind(this))},e.prototype.start=function(a,b,c){var d=k.isFunction(this.prepareData)?this.prepareData(a,b,c):a;return k.isFunction(d)?this._onPrepareDataFunction(d):k.isFunction(d.then)?this._onPrepareDataPromise(d):this._actualStart(d)},e.prototype.doOnSuccess=function(a){this.container._reportDone(a),k.isFunction(this.desc.onSuccess)&&this.desc.onSuccess.apply(null,this.getSuccessArgs(a))},e.prototype.doOnError=function(a){this.container._reportFailed(a),k.isFunction(this.desc.onError)&&this.desc.onError.apply(null,this.getErrorArgs(a))},e.prototype.getErrorArgs=function(a){return[a,this.container.values]},e.prototype.getSuccessArgs=function(a){return[a,this.container.values]},e.prototype._doStart=k.dummyFunc,k.inherit(f,e),f.prototype.destroy=function(){this.ftion=null,e.prototype.destroy.call(this)},f.prototype._doStart=function(a){return this.ftion.apply(null,a)},f.prototype._defaultDataPrepare=function(a,b,c){return[a]},k.inherit(g,e),g.prototype.destroy=function(){this.element=null,e.prototype.destroy.call(this)},g.prototype.getErrorArgs=function(a){return[this.element,a,this.container.values]},g.prototype.getSuccessArgs=function(a){return[this.element,a,this.container.values]},g.prototype.start=function(a,b,c){return k.isFunction(this.desc.onStart)&&this.desc.onStart(this.element,a,c),e.prototype.start.apply(this,arguments)},g.prototype._doStart=function(){return this.defer=p.defer(),this.defer.promise},g.prototype.onFailed=function(a){if(!this.defer)throw new Error("Not expecting resolution");var b=this.defer;this.defer=null,b.reject(a),b=null},g.prototype.onSuccess=function(a){if(!this.defer)throw new Error("Not expecting resolution");var b=this.defer;this.defer=null,b.resolve(a),b=null},k.inherit(h,l),h.prototype.__cleanUp=function(){this.index=null,this.values=null,this.forceStop(),k.arryDestroyAll(this.items),this.items=null,l.prototype.__cleanUp.call(this)},h.prototype.init=function(a){this.items=new Array(a.length)},h.prototype.getCurrent=function(){return this.items[this.get("index")]},h.prototype.stop=function(){this.set("actual",!1)},h.prototype._assignIndex=function(a,b,c){k.isFunction(c)?this.items[a]=new f(this,c,b):this.items[a]=new g(this,c,b)},h.prototype.set_actual=function(a){var b=!!a;return b!==this.actual&&(l.prototype.set_actual.call(this,!!a),void(a?(this.values=[a],this.next()):this.values=null))},h.prototype.next=function(){if(this.values){var a=this.values.length-1;this.set("index",a);var b=this.getCurrent();return b?void b.start(this.values[a],this.get("index"),this.values).done(this.next.bind(this),this.stop.bind(this)):void this.stop()}},h.prototype._reportDone=function(a){this.values.push(a)},h.prototype._reportFailed=function(a){this.values.push(a)},h.prototype.onDone=function(a){this.getCurrent().onSuccess(a)},h.prototype.onFailed=function(a){this.getCurrent().onFailed(a)},b.elements.Pipeline=h,c.registerElementType("Pipeline",h),k.inherit(i,m),i.prototype.__cleanUp=function(){m.prototype.__cleanUp.call(this)},i.prototype.doProcess=function(a,b,c,d,e){var f,g,h=this.getConfigVal("element_name"),i=this.getConfigVal("pipeline"),j=(a?"":"element")+"."+h,k=[];k.push({triggers:".!ready",references:j,handler:this._initialize.bind(this,i)});for(var l=0;l<i.length;l++){if(f=i[l],k.push({name:"test_ready",triggers:".!ready",references:[f.element,j].join(","),handler:this._onParentReady.bind(this,f,l)}),g=f.element.indexOf(">")<0,g&&(!f.success||!f.error))throw new Error("For object config we need success and error triggers");g&&k.push({triggers:f.element+f.success,references:[f.element,j].join(","),handler:this._onElementSuccess.bind(this,l,f.successCheck)},{triggers:f.element+f.error,references:[f.element,j].join(","),handler:this._onElementError.bind(this,l,f.errorCheck)})}Array.prototype.push.apply(d,k)},i.prototype._onElementError=function(a,b,c,d){if(d.get("index")===a&&d.getCurrent().isExpecting()){var e=Array.prototype.slice.call(arguments,4);k.isFunction(b)&&!b.apply(null,e)||d.onFailed(e)}},i.prototype._onElementSuccess=function(a,b,c,d){if(d.get("index")===a&&d.getCurrent().isExpecting()){var e=Array.prototype.slice.call(arguments,4);k.isFunction(b)&&!b(e)||d.onDone(e)}},i.prototype._initialize=function(a,b){b.init(a)},i.prototype._onParentReady=function(a,b,c,d){d._assignIndex(b,a,c)},i.prototype.DEFAULT_CONFIG=function(){return null},k.inherit(j,n),j.prototype.destroy=function(){n.prototype.destroy.call(this)},j.prototype.process=function(a){o.traverseElements(a,this._processElement.bind(this))},j.prototype._processElement=function(a){if(a.modifiers){var b=o.findModifier(a,"Pipeline");if(b){o.initAll(a);for(var c,d=o.getElementsArr(a),e=0;e<b.length;e++)c={name:b[e].options.element_name?b[e].options.element_name:a.name?a.name+"_pipeline_"+e:"_pipeline_"+e,type:"Pipeline"},b[e].options.element_name=c.name,d.push(c)}}},c.registerModifier("Pipeline",i),c.registerPreprocessor("Pipeline",j)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(a,b,c,d){"use strict";function e(a){h.call(this,a)}function f(a){g.extend(a||{},{attributeVal:"data-route"}),e.call(this,a)}var g=a.lib,h=c.BasicModifier;g.inherit(e,h),e.prototype.destroy=function(){h.prototype.destroy.call(this)},e.prototype.ALLOWED_ON=function(){return null},e.prototype.DEFAULT_CONFIG=function(){return{attributeVal:null,evntValProcessor:null}},e.prototype.doProcess=function(a,b,c,d,e){var f=this.getConfigVal("selector"),g=[{triggers:".$element."+f+"!click",references:".",handler:this._onClicked.bind(this,this.getConfigVal("attributeVal"),this.getConfigVal("evntValProcessor"))}];Array.prototype.push.apply(d,g)},e.prototype._onClicked=function(a,b,c,e){var f=this.getRaiseValue(d(e.currentTarget),a,b);"undefined"!=typeof f&&c.raiseEvent("onSelected",f)},e.prototype.getRaiseValue=function(a,b,c){return b?a.attr(b):c?c(a):a},c.registerModifier("Selector",e),g.inherit(f,e),f.prototype.__cleanUp=function(){e.prototype.__cleanUp.call(this)},f.prototype.DEFAULT_CONFIG=function(){return g.extend(e.prototype.DEFAULT_CONFIG(),{selector:"ul li a",attributeVal:"data-route"})},c.registerModifier("RouteController",f),b.modifiers.Selector=e}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(a,b){"use strict";function c(a,b,c,d){this.element=a,this.onActivated=b,this.onDeactivated=c,this.deactivate(),this.router=d}function d(){this.default_page=null,this.pagesmap=new h.Map,this.page=null}function e(a){d.call(this,a),this.container=a,j.call(this)}function f(a){return"#universal#"+a+"#page"}function g(){this.role_router=new e,this.role=null,this.active_router=null,this.isonline=!1}var h=a.lib,i="#norole#page#",j=h.CLDestroyable;c.prototype.destroy=function(){this.element=null,this.onDeactivated=null,this.onActivated=null,this.router.destroy(),this.router=null},c.prototype.activate=function(){this.element.set("actual",!0),h.isFunction(this.onActivated)&&this.onActivated(this.element),this.router&&this.router.reset()},c.prototype.deactivate=function(){this.element.set("actual",!1),this.router&&this.router.clear(),h.isFunction(this.onDeactivated)&&this.onDeactivated(this.element)},c.prototype.gotoSubPage=function(a){this.router&&(a?this.router.set("page",a):this.router.reset())},d.prototype.__cleanUp=function(){this.default_page=null,this.page=null,h.container.destroyAll(this.pagesmap),this.pagesmap.destroy(),this.pagesmap=null},d.prototype.addPage=function(a,b,d,e,f){this.pagesmap.add(a,new c(b,d,e,f))},d.prototype._doDeactivate=function(a,b,c){c!==a&&b&&b.deactivate()},d.prototype.set_page=function(a){if(this.page===a)return!1;this.page=a;var b=null,c=0,d=null;a&&(b=a.split("/"),c=b.shift(),d=b.join("/")),this.pagesmap.traverse(this._doDeactivate.bind(this,c));var e=this.pagesmap.get(c);return e?(e.activate(),e.gotoSubPage(d),!0):void 0},d.prototype.reset=function(){this.set("page",this.default_page)},d.prototype.clear=function(){this.set("page",null),this.getContainer()&&this.getContainer().set("actual",!1)},d.addMethods=function(a){h.inheritMethods(a,d,"clear","reset","set_page","_doDeactivate","addPage")},h.inherit(e,j),d.addMethods(e),e.prototype.__cleanUp=function(){this.container=null,d.prototype.__cleanUp.call(this),j.prototype.__cleanUp.call(this)},e.prototype.getContainer=function(){return this.container},h.inherit(g,e),g.prototype.destroy=function(){this.isonline=null,this.active_router=null,this.role=null,this.role_router.destroy(),this.role_router=null},g.prototype.addNoRolePage=function(a,b,c,d){this.role_router.addPage(i,a,b,c,d)},g.prototype.addUniversalRolePage=function(a,b,c,d,e){var g=f(a);this.role_router.addPage(g,b,c,d,e)},g.prototype.addRolePage=function(a,b,c,d,e){this.role_router.addPage(a,b,c,d,e)},g.prototype._prepareActiveRouter=function(a){if(this.active_router&&this.active_router.clear(),a){var b=this.role_router.pagesmap.get(a);this.active_router=b?b.router:null}else this.active_router=null;this.active_router&&this.active_router.reset()},g.prototype.gotoUniversalRolePage=function(a){return this.role?void this._prepareActiveRouter(f(a)):void console.warn("going to universal page ",a,"with no role set ... no can do ...")},g.prototype.setRole=function(a){return this.role=a,this.online?(this._prepareActiveRouter(a),void this.role_router.set("page",a?a:null)):void this._prepareActiveRouter(null)},g.prototype.resetToRole=function(){this.setRole(this.role)},g.prototype.setPageInRole=function(a){return this.active_router?void(this.active_router&&this.active_router.set("page",a)):void console.warn("No active router for role "+this.role+"?","No can do ...")},g.prototype._onStatusChanged=function(a){this.online="established"===a,this.setRole(this.online?this.role:null)},b.RouterMixIn=d,b.Router=e,b.RoleRouter=g}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent.misc),function(a,b,c,d){"use strict";function e(a,c){k.call(this,a,c),this.role_router=new b.misc.RoleRouter,this.path_prefix=null,this.path=null}function f(a,b,c){a.role_router._onStatusChanged(c),"established"===c?a.role_router.setRole(b):a.role_router.setRole(null),a._checkInitialPath()}function g(a,c,d,e,f){var g=d.length,h=Array.prototype.slice.call(arguments,5,5+g),i=new b.misc.Router(f);for(var j in d)i.addPage(c.pages[d[j]],h[j]);i.default_page=c.default_page,e.role_router.addRolePage(a,f,null,null,i)}function h(){l.call(this)}function i(a,c,d,e,f){for(var g=Array.prototype.slice.call(arguments,5,5+c.length),h=new b.misc.Router(f),i=0;i<c.length;i++)h.addPage(a.pages[c[i]],g[i]);h.default_page=a.default_page,e.role_router.addUniversalRolePage(d,f,null,null,h)}var j=a.lib,k=c.BasicElement,l=(c.BasicModifier,c.BasicProcessor);c.misc,j.q;j.inherit(e,k),e.prototype.__cleanUp=function(){this.path_prefix=null,this.path=null,this.role_router.destroy(),this.role_router=null,k.prototype.__cleanUp.call(this)},e.prototype.gotoPage=function(a){this.role_router.setPageInRole(a),this.set("path",a)},e.prototype.gotoUniversalRolePage=function(a){this.role_router.gotoUniversalRolePage.apply(this.role_router,arguments),this.set("path_prefix",a),this.set("path",this.role_router.active_router.default_page)},e.prototype.resetToRole=function(){this.role_router.resetToRole.apply(this.role_router,arguments),this.set("path_prefix",null),this.set("path",this.role_router.active_router.default_page)},e.prototype.set_path=function(a){this.path=a},e.prototype._checkInitialPath=function(){this.role_router.role&&this.role_router.online&&this.set("path",this.role_router.active_router.default_page)},c.registerElementType("RoleRouterElement",e),j.inherit(h,l),h.prototype.destroy=function(){l.prototype.destroy.call(this)},h.prototype.processRoleRouter=function(a,b,c){if(!b.sttusSource)throw new Error("Missing sttusSource");if(!b.roleSource)throw new Error("Missing roleSource");var d=a+"_router";c.elements.push({name:d,type:"RoleRouterElement"}),c.logic.push({triggers:b.roleSource+","+b.sttusSource,references:"element."+d,handler:f}),b.roles&&j.traverseShallow(b.roles,this.processRole.bind(this,c.logic,"element."+d)),b.anyRole&&j.traverseShallow(b.anyRole,this.processAnyRole.bind(this,c.logic,"element."+d))},h.prototype.processAnyRole=function(a,b,c,d){if(c){var e=Object.keys(c.pages);a.push({triggers:".!ready",references:[b,c.container].concat(e).join(","),handler:i.bind(null,c,e,d)})}},h.prototype.processRole=function(a,b,c,d){if(!c.pages)return void console.warn("No page for role ",d);var e=[b,c.container],f=Object.keys(c.pages);Array.prototype.push.apply(e,f),a.push({triggers:".!ready",references:e.join(","),handler:g.bind(null,d,c,f)})},h.prototype.process=function(a){for(var b in this.config)this.processRoleRouter(b,this.config[b],a)},c.registerPreprocessor("RoleRouter",h)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(a,b,c,d){"use strict";function e(a,b){h.call(this,a,b),j.call(this)}function f(){i.call(this)}var g=a.lib,h=c.BasicElement,i=(c.BasicModifier,c.BasicProcessor),j=b.misc.RouterMixIn;c.misc,g.q;g.inherit(e,h),j.addMethods(e),e.prototype.__cleanUp=function(){j.prototype.__cleanUp.call(this),h.prototype.__cleanUp.call(this)},e.prototype._doInitializeView=function(a,b,c,d,e,f){this.default_page=d;for(var g=0;g<a.length;g++)this.addPage(c[a[g]],b[g]);(!f||f&&e.get("actual"))&&this.reset()},e.prototype.getContainer=function(){return null},c.registerElementType("TabViewElement",e),g.inherit(f,i),f.prototype.destroy=function(){i.prototype.destroy.call(this)},f.prototype.process=function(a){for(var b in this.config)this.createTabView(b,this.config[b],a)},f.prototype.createTabView=function(a,b,c){if(!b.tabs)throw new Error("No tabs record in config for tab view ",a);"bind_actual"in b||(b.bind_actual=!0);var d=["element."+a+"_tab_view",b.selector];c.elements.push({name:a+"_tab_view",type:"TabViewElement",options:{toggle:b.toggle||!1}});var e=Object.keys(b.tabs);Array.prototype.push.apply(d,e),c.logic.push({triggers:".!ready",references:d.join(","),handler:this._initializeElement.bind(this,a,b,e)}),b.bind_actual&&c.logic.push({triggers:b.selector+":actual",references:d.join(","),handler:this._onSelectorActual.bind(this,a,b,e)}),b.selector&&c.logic.push({triggers:b.selector+".$element!onSelected",references:d[0],handler:this._onSelected.bind(this)})},f.prototype._onSelectorActual=function(a,b,c,d,e){var f=Array.prototype.slice.call(arguments,5),h=arguments[5+c.length];if(h){d.reset();var i=d.get("page");d.set("page",null),this._onSelected(d,null,i)}else f.forEach(g.doMethod.bind(null,"set",["actual",!1]))},f.prototype._initializeElement=function(a,b,c,d,e){var f=Array.prototype.slice.call(arguments,5);d._doInitializeView(c,f,b.tabs,b.default_tab||null,e,b.bind_actual)},f.prototype._onSelected=function(a,b,c){return c===a.get("page")&&a.getConfigVal("toggle")?void a.clear():void a.set("page",c)},c.registerPreprocessor("TabView",f)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(a,b,c,d){"use strict";function e(){i.call(this),this.elements=[]}function f(){var a=Array.prototype.slice.call(arguments),b=a.pop();"established"!==b&&a.forEach(h.doMethod.bind(null,"set",["actual",!1])),a=null}function g(a){return h.isString(a)?a:a.name}var h=a.lib,i=c.BasicProcessor,j=c.misc;h.q;h.inherit(e,i),e.prototype.destroy=function(){this.elements=null,i.prototype.destroy.call(this)},e.prototype.configure=function(a){i.prototype.configure.call(this,a)},e.prototype.process=function(a){if(this.config){if(!this.config.state)throw new Error("No state field in config");if(!this.config.elements)throw new Error("No elements field in config");j.traverseElements(a,this._onElement.bind(this),["element"]),a.logic.push({triggers:this.config.state,references:this.elements.join(","),handler:f.bind(this)})}},e.prototype._onElement=function(a,b){var c=b.join(".");this._match(a,c)&&this.elements.push(c)},e.prototype._match=function(a,b){for(var c=null,d=0;d<this.config.elements.length;d++){if(c=this.config.elements[d],h.isString(c)&&b===c)return!0;if(c.type===a.type){if(!c.modifiers)return!0;if(a.modifiers&&h.arryOperations.intersect(c.modifiers,a.modifiers.map(g)).filter(h.isString).length)return!0}}return!1},c.registerPreprocessor("LogoutDeactivator",e)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(a,b,c,d){"use strict";function e(){g.call(this)}var f=a.lib,g=c.BasicProcessor;f.inherit(e,g),e.prototype.process=function(a){this.config&&this.config.views&&f.traverseShallow(this.config.views,this._processView.bind(this,a))},e.prototype._applyRowEventLogic=function(a,b,d,e){if(c.misc.initLogic(a),!d.handler)throw new Error("DataView "+b+"has no event handler for event "+e);if(!d.references)throw new Error("DataView "+b+"has no references for event "+e);a.logic.push({triggers:"element."+b+".$element!"+e,references:d.references,handler:d.handler})},e.prototype._applyRowEventLink=function(a,b,d,e){c.misc.initLinks(a),a.links.push({source:"element."+b+".$element!"+e,target:d.target,filter:d.filter})},e.prototype._processRowEvent=function(a,b,c,d){if(c.handler&&c.references)return this._applyRowEventLogic(a,b,c,d);if(c.target)return this._applyRowEventLink(a,b,c,d);throw new Error("Unknow event handler for _processRowEvent: "+d+" in "+b)},e.prototype._processView=function(a,b,d){var e=d.split("."),g=e.pop(),h=c.misc.findElement(a,e.join(".")),i=b.type||this.config.defaults.view_type;if(c.misc.findElement(h,g))throw new Error("Element on path "+d+" already exists");c.misc.initElements(h),h.options.elements.push({name:g,type:i,options:f.extend({},this.config.defaults[i],b.config)}),b.rowEvents&&f.traverseShallow(b.rowEvents,this._processRowEvent.bind(this,a,d))},c.registerPreprocessor("DataView",e)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(a,b,c,d){"use strict";function e(a,b,c,e){d(a).jkey(e,b.fire.bind(b,{key:e,value:c}))}function f(a,b){i.call(this,a,b),this.onUp=new h.HookCollection,h.traverseShallow(b.events.up,e.bind(null,b.selector||document,this.onUp))}function g(){j.call(this)}var h=a.lib,i=c.BasicElement,j=c.BasicProcessor;h.inherit(f,i),f.prototype.__cleanUp=function(){this.onUp.destroy(),this.onUp=null,i.prototype.__cleanUp.call(this)},f.prototype.initialize=function(){i.prototype.initialize.call(this)},c.registerElementType("KeyboardInputElement",f),h.inherit(g,j),g.prototype.process=function(a){if(this.config){if(!this.config.element_name)throw new Error("No element input");if(!this.config.events)throw new Error("No events listed");a.elements.push({name:this.config.element_name,type:"KeyboardInputElement",options:{events:this.config.events}})}},c.registerPreprocessor("KeyboardController",g)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery);