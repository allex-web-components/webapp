!function(e,t,i){"use strict";function r(e,t){h.call(this,e,t),this.name=t,this.listener=null}function n(e,t){h.call(this,e,t),this.name=t,this.listener=null}function o(e,t){u.call(this,e,t);var i=t.split(".");this.method="class"===i[0]?"addClass":i[0],this.removeMethod=this._chooseRemover(),this.prop=i[1]}function s(e){u.call(this,e,this.propertyName)}function l(e){s.call(this,e)}function a(e){s.call(this,e)}function p(e){s.call(this,e)}var c=ALLEX.lib,h=i.eventEmitterHandlingRegistry.EventEmitterHandler,u=i.propertyTargetHandlingRegistry.PropertyTargetHandler;c.inherit(r,h),r.prototype.destroy=function(){this.listener&&this.emitter.off(this.name,this.listener),this.listener=null,this.name=null,h.prototype.destroy.call(this)},r.prototype.raiseEvent=function(){this.emitter.trigger.call(this.emitter,this.name,Array.prototype.slice.call(arguments))},r.prototype.listenToEvent=function(e){if(!this.listener)return this.listener=e,"change"===this.name?this.emitter.on(this.name,this._handleChange.bind(this,e)):this.emitter.on(this.name,e),this},r.prototype._handleChange=function(e,t){e(jQuery(t.target).val())},r.recognizer=function(e){if(e&&e.emitter&&e.emitter.is&&e.emitter.is("input")&&c.isFunction(e.emitter.on)&&c.isFunction(e.emitter.off)&&c.isFunction(e.emitter.bind)&&c.isFunction(e.emitter.unbind)&&c.isFunction(e.emitter.trigger))return r},i.eventEmitterHandlingRegistry.register(r.recognizer),c.inherit(n,h),n.prototype.destroy=function(){this.listener&&this.emitter.off(this.name,this.listener),this.listener=null,this.name=null,h.prototype.destroy.call(this)},n.prototype.raiseEvent=function(){this.emitter.trigger.call(this.emitter,this.name,Array.prototype.slice.call(arguments))},n.prototype.listenToEvent=function(e){if(!this.listener)return this.listener=e,this.emitter.on(this.name,e),this},n.recognizer=function(e){if(e&&e.emitter&&c.isFunction(e.emitter.on)&&c.isFunction(e.emitter.off)&&c.isFunction(e.emitter.bind)&&c.isFunction(e.emitter.unbind)&&c.isFunction(e.emitter.trigger))return n},i.eventEmitterHandlingRegistry.register(n.recognizer),c.inherit(o,u),o.prototype.destroy=function(){this.removeMethod=null,this.method=null,this.prop=null,this.method=null,u.prototype.destroy.call(this)},o.prototype._chooseRemover=function(){switch(this.method){case"attr":return"removeAttr";case"class":return"removeClass";case"prop":return"removeProp";case"css":return"css"}},o.prototype.handle=function(e){this.carrier[c.isUndef(e)?this.removeMethod:this.method](this.prop,e)},o.recognizer=function(e){var t=e.name.split(".");if("attr"===t[0]||"css"===t[0]||"prop"===t[0]||"class"===t[0])return e&&e.carrier&&c.isFunction(e.carrier.on)&&c.isFunction(e.carrier.off)&&c.isFunction(e.carrier.bind)&&c.isFunction(e.carrier.unbind)&&c.isFunction(e.carrier.trigger)?o:void 0},i.propertyTargetHandlingRegistry.register(o.recognizer),c.inherit(s,u),s.prototype.handle=function(e){this.carrier[this.propertyName](e)},c.inherit(l,s),l.prototype.propertyName="val",l.recognizer=function(e){if("val"===e.name)return l},i.propertyTargetHandlingRegistry.register(l.recognizer),c.inherit(a,s),a.prototype.propertyName="text",a.recognizer=function(e){if("text"===e.name)return a},i.propertyTargetHandlingRegistry.register(a.recognizer),c.inherit(p,s),p.prototype.propertyName="html",p.recognizer=function(e){if("html"===e.name)return p},i.propertyTargetHandlingRegistry.register(p.recognizer)}(0,ALLEX.WEB_COMPONENTS.allex_applib,ALLEX.WEB_COMPONENTS.allex_applinkinglib),function(e,t,i,r){"use strict";function n(e,t){s.call(this,e,t),this.$element=null,this._addHook("onPreShow"),this._addHook("onPreHide"),this._addHook("onShown"),this._addHook("onHidden"),this._helpers=null;var i=this.getConfigVal("helperObjects");for(var r in i)this.assignHelperObj(r,i[r])}var o=ALLEX.lib,s=i.BasicElement;i.resourceFactory,o.q;o.inherit(n,s),n.prototype.__cleanUp=function(){this._helpers&&(o.container.destroyAll(this._helpers),this._helpers.destroy()),this._helpers=null,this.$element=null,s.prototype.__cleanUp.call(this)},n.prototype.assignHelperObj=function(e,t){this._helpers||(this._helpers=new o.Map),this._helpers.add(e,t)},n.prototype.getHelperObj=function(e){return this._helpers.get(e)},n.prototype.initialize=function(){if(s.prototype.initialize.call(this),this.$element=r("#"+this.get("id")),!this.$element||!this.$element.length)throw new Error("Unable to find DOM element "+this.get("id"));this.fireInitializationDone(),this.attachHook("onPreShow",this.getConfigVal("onPreShow")),this.attachHook("onPreHide",this.getConfigVal("onPreHide")),this.attachHook("onShown",this.getConfigVal("onShown")),this.attachHook("onHidden",this.getConfigVal("onHidden")),this.set_actual(!!this.get("actual"))},n.prototype.set_actual=function(e){return this.$element||(this.actual=e),s.prototype.set_actual.call(this,e)},n.prototype.onUnloaded=function(){this.hide()},n.prototype.onLoaded=function(){this.get("actual")&&this.show()},n.prototype.onLoadFailed=function(){},n.prototype.onLoadProgress=function(){},n.prototype.set_loaded=function(e){if(this.loaded==e)return!1;var t=this.loaded;return this.loaded=e,!e&&t&&this.unload(),!0},n.prototype.resetElement=function(e){var t=this.getConfigVal("reset");o.isFunction(t)&&t(this,e)},n.prototype.show=function(){if(this.$element){this.fireHook("onPreShow",[this]);var e=this.getConfigVal("visible_class"),t=this.getConfigVal("show_jq_function");if(e&&this.$element.addClass(e),t){if(o.isString(t)&&this.$element[t](),o.isArray(t)){var i=t[0];this.$element[i].apply(this.$element,t.slice(1))}}else this.$element.show();this.fireHook("onShown",[this])}},n.prototype.hide=function(){if(this.$element){this.fireHook("onPreHide",[this]);var e=this.getConfigVal("visible_class"),t=this.getConfigVal("hide_jq_function");if(e&&this.$element.removeClass(e),t){if(o.isString(t)&&this.$element[t](),o.isArray(t)){var i=t[0];this.$element[i].apply(this.$element,t.slice(1))}}else this.$element.hide();this.fireHook("onHidden")}},n.prototype.getElement=function(e){var t,i;if(0===e.indexOf("$element.")&&(i=e.replace("$element.","")),0===e.indexOf(".$element.")&&(i=e.replace(".$element.","")),i&&(t=this.$element.find(i)),t){if(0===t.length)throw new o.Error("JQUERY_FIND_FAILED","jQuery could not find "+i);return t}return"$element"===(e=e.replace(/^\./,""))?this.$element:"."===e?this.getMeAsElement():this.childAtPath(e)},n.prototype.findById=function(e){return"$element"===e?this.$element:s.prototype.findById.call(this,e)},n.prototype.getMeAsElement=function(){return this},n.prototype.findDomReference=function(e){if(!e)throw new Error("No type given");var t=this.id;return jQuery("#references #references_"+t+" #references_"+t+"_"+e)},n.prototype.raiseEvent=function(){this.$element.trigger.apply(this.$element,arguments)},n.ResourcesSchema={type:"array",items:{type:"object",properties:{type:{type:"string"},name:{type:"string"},options:{type:"object"}},additionalProperties:!1,required:["type","name"]}},t.elements.WebElement=n,i.registerElementType("WebElement",n)}(0,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(e,t,i){"use strict";function r(e){l.call(this,e),this.zl=null}var n=ALLEX.lib,o=n.qlib,s=n.q,l=i.BasicResourceLoader,a={type:"object",properties:{url:{type:"string"},extractor:{type:"string"},ispermanent:{type:"boolean"}},required:["url"]};n.inherit(r,l),r.prototype.__cleanUp=function(){l.prototype.__cleanUp.call(this)},r.prototype.doLoad=function(){var e=s.defer(),t=this.getConfigVal("extractor"),i=ALLEX.WEB_COMPONENTS["allex_vektr.imageanimations"].ZipLoader;this.zl=new i(t?new RegExp(t):null);var r=this.zl.load(this.getConfigVal("url"));return o.promise2defer(r,e),e},r.prototype.doUnload=function(){var e=s.defer();return this.zl.destroy(),this.zl=null,e},r.prototype.CONFIG_SCHEMA=function(){return a},r.prototype.DEFAULT_CONFIG=function(){return null},r.prototype.get=function(e){return this.zl?this.zl.result.get(e):null},r.prototype.loadOnDemand=function(){return!0},t.resources.AnimatedImageZipLibrary=r,i.registerResourceType("AnimatedImageZipLibrary",r)}(0,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib),function(e,t,i,r){"use strict";function n(e){if(s.call(this,o.extend({},e,{ispermanent:!0})),!window.WebFont)throw new Error("No WebFont component loaded, unable to load resource")}var o=ALLEX.lib,s=i.BasicResourceLoader,l=o.q,a={type:"object",properties:{urls:{type:"array",items:{type:"string"}},families:{type:"array",items:{type:"string"}},ispermanent:{type:"boolean"}}};o.inherit(n,s),n.prototype.__cleanUp=function(){s.prototype.__cleanUp.call(this)},n.prototype.CONFIG_SCHEMA=function(){return a},n.prototype.DEFAULT_CONFIG=function(){return null},n.prototype.doLoad=function(){var e=l.defer();return r(document).ready(this._go.bind(this,e)),e},n.prototype._go=function(e){WebFont.load({custom:{families:this.getConfigVal("families"),urls:this.getConfigVal("urls")},active:e.resolve.bind(e,"ok")})},t.resources.FontLoader=n,i.registerResourceType("FontLoader",n)}(0,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(e,t,i){function r(e){o.call(this,e)}var n=ALLEX.lib,o=i.BasicResourceLoader,s=n.q,l={type:"object",properties:{url:{type:"string"}},required:["url"]};n.inherit(r,o),r.prototype.__cleanUp=function(){o.prototype.__cleanUp.call(this)},r.prototype.doLoad=function(){var e=s.defer();return e.resolve(!0),e},r.prototype.DEFAULT_CONFIG=function(){return null},r.prototype.CONFIG_SCHEMA=function(){return l},r.prototype.getFullUrl=function(e,t){var i=this.getConfigVal("url");return i="/"===i.charAt(i.length)?i+e:i+"/"+e},i.registerResourceType("URLGenerator",r)}(0,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib),function(e,t,i){"use strict";function r(){this.data=null,this.busy=!1}var n=ALLEX.lib;n.BasicAngularController,n.q;r.prototype.__cleanUp=function(){this.data=null,this.busy=null},r.prototype.set_data=function(e){var t=this.getConfigVal("dataHandler");return n.isFunction(t)?t(this.$element,e):this.data!==e&&(this.data=e,!0)},r.prototype.hasDataChanged=function(e){return n.isUndef(e)||!0===e},r.prototype.set_busy=function(e){this.busy=e,console.log(this.get("id"),"reported busy",e)},r.addMethods=function(e){n.inheritMethods(e,r,"set_data","hasDataChanged","set_busy")},t.mixins.DataElementMixIn=r}(0,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib),function(e,t,i){"use strict";function r(e,t){o.call(this,e,t),s.call(this)}var n=ALLEX.lib,o=t.elements.WebElement,s=t.mixins.DataElementMixIn;n.inherit(r,o),s.addMethods(r),r.prototype.__cleanUp=function(){s.prototype.__cleanUp.call(this),o.prototype.__cleanUp.call(this)},t.elements.DataAwareElement=r,i.registerElementType("DataAwareElement",r)}(0,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib),function(e,t,i,r){"use strict";function n(e,t){this.container=e,this.desc=t,this.prepareData=t.prepareData||null,this.defer=null}function o(e,t,i){n.call(this,e,i),this.ftion=t,c.isFunction(this.prepareData)||(this.prepareData=this._defaultDataPrepare.bind(this))}function s(e,t,i){n.call(this,e,i),this.element=t}function l(e,t){h.call(this,e,t),this.items=null,this.values=null,this.index=null}function a(e){u.call(this,e)}function p(){f.call(this)}var c=ALLEX.lib,h=i.BasicElement,u=i.BasicModifier,f=i.BasicProcessor,d=i.misc,y=c.q;n.prototype.destroy=function(){this.prepareData=null,this.desc=null,this.container=null,this.defer=null},n.prototype.isExpecting=function(){return!!this.defer},n.prototype._actualStart=function(e){var t=this._doStart(e);return t.done(this.doOnSuccess.bind(this),this.doOnError.bind(this)),t},n.prototype._onPrepareDataFunction=function(e){return e().then(this._actualStart.bind(this))},n.prototype._onPrepareDataPromise=function(e){return e.then(this._actualStart.bind(this))},n.prototype.start=function(e,t,i){var r=c.isFunction(this.prepareData)?this.prepareData(e,t,i):e;return c.isFunction(r)?this._onPrepareDataFunction(r):c.isFunction(r.then)?this._onPrepareDataPromise(r):this._actualStart(r)},n.prototype.doOnSuccess=function(e){this.container._reportDone(e),c.isFunction(this.desc.onSuccess)&&this.desc.onSuccess.apply(null,this.getSuccessArgs(e))},n.prototype.doOnError=function(e){this.container._reportFailed(e),c.isFunction(this.desc.onError)&&this.desc.onError.apply(null,this.getErrorArgs(e))},n.prototype.getErrorArgs=function(e){return[e,this.container.values]},n.prototype.getSuccessArgs=function(e){return[e,this.container.values]},n.prototype._doStart=c.dummyFunc,c.inherit(o,n),o.prototype.destroy=function(){this.ftion=null,n.prototype.destroy.call(this)},o.prototype._doStart=function(e){return this.ftion.apply(null,e)},o.prototype._defaultDataPrepare=function(e,t,i){return[e]},c.inherit(s,n),s.prototype.destroy=function(){this.element=null,n.prototype.destroy.call(this)},s.prototype.getErrorArgs=function(e){return[this.element,e,this.container.values]},s.prototype.getSuccessArgs=function(e){return[this.element,e,this.container.values]},s.prototype.start=function(e,t,i){return c.isFunction(this.desc.onStart)&&this.desc.onStart(this.element,e,i),n.prototype.start.apply(this,arguments)},s.prototype._doStart=function(){return this.defer=y.defer(),this.defer.promise},s.prototype.onFailed=function(e){if(!this.defer)throw new Error("Not expecting resolution");var t=this.defer;this.defer=null,t.reject(e),t=null},s.prototype.onSuccess=function(e){if(!this.defer)throw new Error("Not expecting resolution");var t=this.defer;this.defer=null,t.resolve(e),t=null},c.inherit(l,h),l.prototype.__cleanUp=function(){this.index=null,this.values=null,this.forceStop(),c.arryDestroyAll(this.items),this.items=null,h.prototype.__cleanUp.call(this)},l.prototype.init=function(e){this.items=new Array(e.length)},l.prototype.getCurrent=function(){return this.items[this.get("index")]},l.prototype.stop=function(){this.set("actual",!1)},l.prototype._assignIndex=function(e,t,i){c.isFunction(i)?this.items[e]=new o(this,i,t):this.items[e]=new s(this,i,t)},l.prototype.set_actual=function(e){if(!!e===this.actual)return!1;h.prototype.set_actual.call(this,!!e),e?(this.values=[e],this.next()):this.values=null},l.prototype.next=function(){if(this.values){var e=this.values.length-1;this.set("index",e);var t=this.getCurrent();t?t.start(this.values[e],this.get("index"),this.values).done(this.next.bind(this),this.stop.bind(this)):this.stop()}},l.prototype._reportDone=function(e){this.values.push(e)},l.prototype._reportFailed=function(e){this.values.push(e)},l.prototype.onDone=function(e){this.getCurrent().onSuccess(e)},l.prototype.onFailed=function(e){this.getCurrent().onFailed(e)},t.elements.Pipeline=l,i.registerElementType("Pipeline",l),c.inherit(a,u),a.prototype.__cleanUp=function(){u.prototype.__cleanUp.call(this)},a.prototype.doProcess=function(e,t,i,r,n){var o,s,l=this.getConfigVal("element_name"),a=this.getConfigVal("pipeline"),p=(e?"":"element")+"."+l,c=[];c.push({triggers:".!ready",references:p,handler:this._initialize.bind(this,a)});for(var h=0;h<a.length;h++){if(o=a[h],c.push({name:"test_ready",triggers:".!ready",references:[o.element,p].join(","),handler:this._onParentReady.bind(this,o,h)}),(s=o.element.indexOf(">")<0)&&(!o.success||!o.error))throw new Error("For object config we need success and error triggers");s&&c.push({triggers:o.element+o.success,references:[o.element,p].join(","),handler:this._onElementSuccess.bind(this,h,o.successCheck)},{triggers:o.element+o.error,references:[o.element,p].join(","),handler:this._onElementError.bind(this,h,o.errorCheck)})}Array.prototype.push.apply(r,c)},a.prototype._onElementError=function(e,t,i,r){if(r.get("index")===e&&r.getCurrent().isExpecting()){var n=Array.prototype.slice.call(arguments,4);c.isFunction(t)&&!t.apply(null,n)||r.onFailed(n)}},a.prototype._onElementSuccess=function(e,t,i,r){if(r.get("index")===e&&r.getCurrent().isExpecting()){var n=Array.prototype.slice.call(arguments,4);c.isFunction(t)&&!t(n)||r.onDone(n)}},a.prototype._initialize=function(e,t){t.init(e)},a.prototype._onParentReady=function(e,t,i,r){r._assignIndex(t,e,i)},a.prototype.DEFAULT_CONFIG=function(){return null},c.inherit(p,f),p.prototype.destroy=function(){f.prototype.destroy.call(this)},p.prototype.process=function(e){d.traverseElements(e,this._processElement.bind(this))},p.prototype._processElement=function(e){if(e.modifiers){var t=d.findModifier(e,"Pipeline");if(t){d.initAll(e);for(var i,r=d.getElementsArr(e),n=0;n<t.length;n++)i={name:t[n].options.element_name?t[n].options.element_name:e.name?e.name+"_pipeline_"+n:"_pipeline_"+n,type:"Pipeline"},t[n].options.element_name=i.name,r.push(i)}}},i.registerModifier("Pipeline",a),i.registerPreprocessor("Pipeline",p)}(0,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(e,t,i,r){"use strict";function n(e){l.call(this,e)}function o(e){s.extend(e||{},{attributeVal:"data-route"}),n.call(this,e)}var s=ALLEX.lib,l=i.BasicModifier;s.inherit(n,l),n.prototype.destroy=function(){l.prototype.destroy.call(this)},n.prototype.ALLOWED_ON=function(){return null},n.prototype.DEFAULT_CONFIG=function(){return{attributeVal:null,evntValProcessor:null}},n.prototype.doProcess=function(e,t,i,r,n){var o=[{triggers:".$element."+this.getConfigVal("selector")+"!click",references:".",handler:this._onClicked.bind(this,this.getConfigVal("attributeVal"),this.getConfigVal("evntValProcessor"))}];Array.prototype.push.apply(r,o)},n.prototype._onClicked=function(e,t,i,n){var o=this.getRaiseValue(r(n.currentTarget),e,t);void 0!==o&&i.raiseEvent("onSelected",o)},n.prototype.getRaiseValue=function(e,t,i){return t?e.attr(t):i?i(e):e},i.registerModifier("Selector",n),s.inherit(o,n),o.prototype.__cleanUp=function(){n.prototype.__cleanUp.call(this)},o.prototype.DEFAULT_CONFIG=function(){return s.extend(n.prototype.DEFAULT_CONFIG(),{selector:"ul li a",attributeVal:"data-route"})},i.registerModifier("RouteController",o),t.modifiers.Selector=n}(0,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(e,t){"use strict";function i(e,t,i,r){this.element=e,this.onActivated=t,this.onDeactivated=i,this.deactivate(),this.router=r}function r(){this.default_page=null,this.pagesmap=new l.Map,this.page=null}function n(e){r.call(this,e),this.container=e,a.call(this)}function o(e){return"#universal#"+e+"#page"}function s(){this.role_router=new n,this.role=null,this.active_router=null,this.isonline=!1}var l=ALLEX.lib,a=l.CLDestroyable;i.prototype.destroy=function(){this.element=null,this.onDeactivated=null,this.onActivated=null,this.router.destroy(),this.router=null},i.prototype.activate=function(){this.element.set("actual",!0),l.isFunction(this.onActivated)&&this.onActivated(this.element),this.router&&this.router.reset()},i.prototype.deactivate=function(){this.element.set("actual",!1),this.router&&this.router.clear(),l.isFunction(this.onDeactivated)&&this.onDeactivated(this.element)},i.prototype.gotoSubPage=function(e){this.router&&(e?this.router.set("page",e):this.router.reset())},r.prototype.__cleanUp=function(){this.default_page=null,this.page=null,l.container.destroyAll(this.pagesmap),this.pagesmap.destroy(),this.pagesmap=null},r.prototype.addPage=function(e,t,r,n,o){this.pagesmap.add(e,new i(t,r,n,o))},r.prototype._doDeactivate=function(e,t,i){i!==e&&t&&t.deactivate()},r.prototype.set_page=function(e){if(this.page===e)return!1;this.page=e;var t=null,i=0,r=null;e&&(i=(t=e.split("/")).shift(),r=t.join("/")),this.pagesmap.traverse(this._doDeactivate.bind(this,i));var n=this.pagesmap.get(i);return n?(n.activate(),n.gotoSubPage(r),!0):void 0},r.prototype.reset=function(){this.set("page",this.default_page)},r.prototype.clear=function(){this.set("page",null),this.getContainer()&&this.getContainer().set("actual",!1)},r.addMethods=function(e){l.inheritMethods(e,r,"clear","reset","set_page","_doDeactivate","addPage")},l.inherit(n,a),r.addMethods(n),n.prototype.__cleanUp=function(){this.container=null,r.prototype.__cleanUp.call(this),a.prototype.__cleanUp.call(this)},n.prototype.getContainer=function(){return this.container},l.inherit(s,n),s.prototype.destroy=function(){this.isonline=null,this.active_router=null,this.role=null,this.role_router.destroy(),this.role_router=null},s.prototype.addNoRolePage=function(e,t,i,r){this.role_router.addPage("#norole#page#",e,t,i,r)},s.prototype.addUniversalRolePage=function(e,t,i,r,n){var s=o(e);this.role_router.addPage(s,t,i,r,n)},s.prototype.addRolePage=function(e,t,i,r,n){this.role_router.addPage(e,t,i,r,n)},s.prototype._prepareActiveRouter=function(e){if(this.active_router&&this.active_router.clear(),e){var t=this.role_router.pagesmap.get(e);this.active_router=t?t.router:null}else this.active_router=null;this.active_router&&this.active_router.reset()},s.prototype.gotoUniversalRolePage=function(e){this.role?this._prepareActiveRouter(o(e)):console.warn("going to universal page ",e,"with no role set ... no can do ...")},s.prototype.setRole=function(e){this.role=e,this.online?(this._prepareActiveRouter(e),this.role_router.set("page",e||null)):this._prepareActiveRouter(null)},s.prototype.resetToRole=function(){this.setRole(this.role)},s.prototype.setPageInRole=function(e){this.active_router?this.active_router&&this.active_router.set("page",e):console.warn("No active router for role "+this.role+"?","No can do ...")},s.prototype._onStatusChanged=function(e){this.online="established"===e,this.setRole(this.online?this.role:null)},t.RouterMixIn=r,t.Router=n,t.RoleRouter=s}(0,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent.misc),function(e,t,i,r){"use strict";function n(e,i){c.call(this,e,i),this.role_router=new t.misc.RoleRouter,this.path_prefix=null,this.path=null}function o(e,t,i){e.role_router._onStatusChanged(i),"established"===i?e.role_router.setRole(t):e.role_router.setRole(null),e._checkInitialPath()}function s(e,i,r,n,o){var s=r.length,l=Array.prototype.slice.call(arguments,5,5+s),a=new t.misc.Router(o);for(var p in r)a.addPage(i.pages[r[p]],l[p]);a.default_page=i.default_page,n.role_router.addRolePage(e,o,null,null,a)}function l(){h.call(this)}function a(e,i,r,n,o){for(var s=Array.prototype.slice.call(arguments,5,5+i.length),l=new t.misc.Router(o),a=0;a<i.length;a++)l.addPage(e.pages[i[a]],s[a]);l.default_page=e.default_page,n.role_router.addUniversalRolePage(r,o,null,null,l)}var p=ALLEX.lib,c=i.BasicElement,h=(i.BasicModifier,i.BasicProcessor);i.misc,p.q;p.inherit(n,c),n.prototype.__cleanUp=function(){this.path_prefix=null,this.path=null,this.role_router.destroy(),this.role_router=null,c.prototype.__cleanUp.call(this)},n.prototype.gotoPage=function(e){this.role_router.setPageInRole(e),this.set("path",e)},n.prototype.gotoUniversalRolePage=function(e){this.role_router.gotoUniversalRolePage.apply(this.role_router,arguments),this.set("path_prefix",e),this.set("path",this.role_router.active_router.default_page)},n.prototype.resetToRole=function(){this.role_router.resetToRole.apply(this.role_router,arguments),this.set("path_prefix",null),this.set("path",this.role_router.active_router.default_page)},n.prototype.set_path=function(e){this.path=e},n.prototype._checkInitialPath=function(){this.role_router.role&&this.role_router.online&&this.set("path",this.role_router.active_router.default_page)},i.registerElementType("RoleRouterElement",n),p.inherit(l,h),l.prototype.destroy=function(){h.prototype.destroy.call(this)},l.prototype.processRoleRouter=function(e,t,i){if(!t.sttusSource)throw new Error("Missing sttusSource");if(!t.roleSource)throw new Error("Missing roleSource");var r=e+"_router";i.elements.push({name:r,type:"RoleRouterElement"}),i.logic.push({triggers:t.roleSource+","+t.sttusSource,references:"element."+r,handler:o}),t.roles&&p.traverseShallow(t.roles,this.processRole.bind(this,i.logic,"element."+r)),t.anyRole&&p.traverseShallow(t.anyRole,this.processAnyRole.bind(this,i.logic,"element."+r))},l.prototype.processAnyRole=function(e,t,i,r){if(i){var n=Object.keys(i.pages);e.push({triggers:".!ready",references:[t,i.container].concat(n).join(","),handler:a.bind(null,i,n,r)})}},l.prototype.processRole=function(e,t,i,r){if(i.pages){var n=[t,i.container],o=Object.keys(i.pages);Array.prototype.push.apply(n,o),e.push({triggers:".!ready",references:n.join(","),handler:s.bind(null,r,i,o)})}else console.warn("No page for role ",r)},l.prototype.process=function(e){for(var t in this.config)this.processRoleRouter(t,this.config[t],e)},i.registerPreprocessor("RoleRouter",l)}(0,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(e,t,i,r){"use strict";function n(e,t){l.call(this,e,t),p.call(this)}function o(){a.call(this)}var s=ALLEX.lib,l=i.BasicElement,a=(i.BasicModifier,i.BasicProcessor),p=t.misc.RouterMixIn;i.misc,s.q;s.inherit(n,l),p.addMethods(n),n.prototype.__cleanUp=function(){p.prototype.__cleanUp.call(this),l.prototype.__cleanUp.call(this)},n.prototype._doInitializeView=function(e,t,i,r,n,o){this.default_page=r;for(var s=0;s<e.length;s++)this.addPage(i[e[s]],t[s]);(!o||o&&n.get("actual"))&&this.reset()},n.prototype.getContainer=function(){return null},i.registerElementType("TabViewElement",n),s.inherit(o,a),o.prototype.destroy=function(){a.prototype.destroy.call(this)},o.prototype.process=function(e){for(var t in this.config)this.createTabView(t,this.config[t],e)},o.prototype.createTabView=function(e,t,i){if(!t.tabs)throw new Error("No tabs record in config for tab view ",e);"bind_actual"in t||(t.bind_actual=!0);var r=["element."+e+"_tab_view",t.selector];i.elements.push({name:e+"_tab_view",type:"TabViewElement",options:{toggle:t.toggle||!1}});var n=Object.keys(t.tabs);Array.prototype.push.apply(r,n),i.logic.push({triggers:".!ready",references:r.join(","),handler:this._initializeElement.bind(this,e,t,n)}),t.bind_actual&&i.logic.push({triggers:t.selector+":actual",references:r.join(","),handler:this._onSelectorActual.bind(this,e,t,n)}),t.selector&&i.logic.push({triggers:t.selector+".$element!onSelected",references:r[0],handler:this._onSelected.bind(this)})},o.prototype._onSelectorActual=function(e,t,i,r,n){var o=Array.prototype.slice.call(arguments,5);if(arguments[5+i.length]){r.reset();var l=r.get("page");r.set("page",null),this._onSelected(r,null,l)}else o.forEach(s.doMethod.bind(null,"set",["actual",!1]))},o.prototype._initializeElement=function(e,t,i,r,n){var o=Array.prototype.slice.call(arguments,5);r._doInitializeView(i,o,t.tabs,t.default_tab||null,n,t.bind_actual)},o.prototype._onSelected=function(e,t,i){i===e.get("page")&&e.getConfigVal("toggle")?e.clear():e.set("page",i)},i.registerPreprocessor("TabView",o)}(0,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(e,t,i,r){"use strict";function n(){a.call(this),this.elements=[]}function o(){var e=Array.prototype.slice.call(arguments);"established"!==e.pop()&&e.forEach(l.doMethod.bind(null,"set",["actual",!1])),e=null}function s(e){return l.isString(e)?e:e.name}var l=ALLEX.lib,a=i.BasicProcessor,p=i.misc;l.q;l.inherit(n,a),n.prototype.destroy=function(){this.elements=null,a.prototype.destroy.call(this)},n.prototype.configure=function(e){a.prototype.configure.call(this,e)},n.prototype.process=function(e){if(this.config){if(!this.config.state)throw new Error("No state field in config");if(!this.config.elements)throw new Error("No elements field in config");p.traverseElements(e,this._onElement.bind(this),["element"]),e.logic.push({triggers:this.config.state,references:this.elements.join(","),handler:o.bind(this)})}},n.prototype._onElement=function(e,t){var i=t.join(".");this._match(e,i)&&this.elements.push(i)},n.prototype._match=function(e,t){for(var i=null,r=0;r<this.config.elements.length;r++){if(i=this.config.elements[r],l.isString(i)&&t===i)return!0;if(i.type===e.type){if(!i.modifiers)return!0;if(e.modifiers&&l.arryOperations.intersect(i.modifiers,e.modifiers.map(s)).filter(l.isString).length)return!0}}return!1},i.registerPreprocessor("LogoutDeactivator",n)}(0,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(e,t,i,r){"use strict";function n(){s.call(this)}var o=ALLEX.lib,s=i.BasicProcessor;o.inherit(n,s),n.prototype.process=function(e){this.config&&this.config.views&&o.traverseShallow(this.config.views,this._processView.bind(this,e))},n.prototype._applyRowEventLogic=function(e,t,r,n){if(i.misc.initLogic(e),!r.handler)throw new Error("DataView "+t+"has no event handler for event "+n);if(!r.references)throw new Error("DataView "+t+"has no references for event "+n);e.logic.push({triggers:"element."+t+".$element!"+n,references:r.references,handler:r.handler})},n.prototype._applyRowEventLink=function(e,t,r,n){i.misc.initLinks(e),e.links.push({source:"element."+t+".$element!"+n,target:r.target,filter:r.filter})},n.prototype._processRowEvent=function(e,t,i,r){if(i.handler&&i.references)return this._applyRowEventLogic(e,t,i,r);if(i.target)return this._applyRowEventLink(e,t,i,r);throw new Error("Unknow event handler for _processRowEvent: "+r+" in "+t)},n.prototype._processView=function(e,t,r){var n=r.split("."),s=n.pop(),l=i.misc.findElement(e,n.join(".")),a=t.type||this.config.defaults.view_type;if(i.misc.findElement(l,s))throw new Error("Element on path "+r+" already exists");i.misc.initElements(l),l.options.elements.push({name:s,type:a,options:o.extend({},this.config.defaults[a],t.config)}),t.rowEvents&&o.traverseShallow(t.rowEvents,this._processRowEvent.bind(this,e,r))},i.registerPreprocessor("DataView",n)}(0,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(e,t,i,r){"use strict";function n(e,t,i,n){r(e).jkey(n,t.fire.bind(t,{key:n,value:i}))}function o(e,t){a.call(this,e,t),this.onUp=new l.HookCollection,l.traverseShallow(t.events.up,n.bind(null,t.selector||document,this.onUp))}function s(){p.call(this)}var l=ALLEX.lib,a=i.BasicElement,p=i.BasicProcessor;l.inherit(o,a),o.prototype.__cleanUp=function(){this.onUp.destroy(),this.onUp=null,a.prototype.__cleanUp.call(this)},o.prototype.initialize=function(){a.prototype.initialize.call(this)},i.registerElementType("KeyboardInputElement",o),l.inherit(s,p),s.prototype.process=function(e){if(this.config){if(!this.config.element_name)throw new Error("No element input");if(!this.config.events)throw new Error("No events listed");e.elements.push({name:this.config.element_name,type:"KeyboardInputElement",options:{events:this.config.events}})}},i.registerPreprocessor("KeyboardController",s)}(0,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery);