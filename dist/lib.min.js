!function(a,b,c){"use strict";function d(a,b){l.call(this,a,b),this.name=b,this.listener=null}function e(a,b){l.call(this,a,b),this.name=b,this.listener=null}function f(a,b){m.call(this,a,b);var c=b.split(".");this.method="class"===c[0]?"addClass":c[0],this.removeMethod=this._chooseRemover(),this.prop=c[1]}function g(a){m.call(this,a,this.propertyName)}function h(a){g.call(this,a)}function i(a){g.call(this,a)}function j(a){g.call(this,a)}var k=a.lib,l=c.eventEmitterHandlingRegistry.EventEmitterHandler,m=c.propertyTargetHandlingRegistry.PropertyTargetHandler;k.inherit(d,l),d.prototype.destroy=function(){this.listener&&this.emitter.off(this.name,this.listener),this.listener=null,this.name=null,l.prototype.destroy.call(this)},d.prototype.raiseEvent=function(){this.emitter.trigger.call(this.emitter,this.name,Array.prototype.slice.call(arguments))},d.prototype.listenToEvent=function(a){if(!this.listener)return this.listener=a,"change"===this.name?this.emitter.on(this.name,this._handleChange.bind(this,a)):this.emitter.on(this.name,a),this},d.prototype._handleChange=function(a,b){a(jQuery(b.target).val())},d.recognizer=function(a){if(a&&a.emitter&&a.emitter.is&&a.emitter.is("input")&&k.isFunction(a.emitter.on)&&k.isFunction(a.emitter.off)&&k.isFunction(a.emitter.bind)&&k.isFunction(a.emitter.unbind)&&k.isFunction(a.emitter.trigger))return d},c.eventEmitterHandlingRegistry.register(d.recognizer),k.inherit(e,l),e.prototype.destroy=function(){this.listener&&this.emitter.off(this.name,this.listener),this.listener=null,this.name=null,l.prototype.destroy.call(this)},e.prototype.raiseEvent=function(){this.emitter.trigger.call(this.emitter,this.name,Array.prototype.slice.call(arguments))},e.prototype.listenToEvent=function(a){if(!this.listener)return this.listener=a,this.emitter.on(this.name,a),this},e.recognizer=function(a){if(a&&a.emitter&&k.isFunction(a.emitter.on)&&k.isFunction(a.emitter.off)&&k.isFunction(a.emitter.bind)&&k.isFunction(a.emitter.unbind)&&k.isFunction(a.emitter.trigger))return e},c.eventEmitterHandlingRegistry.register(e.recognizer),k.inherit(f,m),f.prototype.destroy=function(){this.removeMethod=null,this.method=null,this.prop=null,this.method=null,m.prototype.destroy.call(this)},f.prototype._chooseRemover=function(){switch(this.method){case"attr":return"removeAttr";case"class":return"removeClass";case"prop":return"removeProp";case"css":return"css"}},f.prototype.handle=function(a){this.carrier[k.isUndef(a)?this.removeMethod:this.method](this.prop,a)},f.recognizer=function(a){var b=a.name.split(".");if("attr"===b[0]||"css"===b[0]||"prop"===b[0]||"class"===b[0])return a&&a.carrier&&k.isFunction(a.carrier.on)&&k.isFunction(a.carrier.off)&&k.isFunction(a.carrier.bind)&&k.isFunction(a.carrier.unbind)&&k.isFunction(a.carrier.trigger)?f:void 0},c.propertyTargetHandlingRegistry.register(f.recognizer),k.inherit(g,m),g.prototype.handle=function(a){this.carrier[this.propertyName](a)},k.inherit(h,g),h.prototype.propertyName="val",h.recognizer=function(a){if("val"===a.name)return h},c.propertyTargetHandlingRegistry.register(h.recognizer),k.inherit(i,g),i.prototype.propertyName="text",i.recognizer=function(a){if("text"===a.name)return i},c.propertyTargetHandlingRegistry.register(i.recognizer),k.inherit(j,g),j.prototype.propertyName="html",j.recognizer=function(a){if("html"===a.name)return j},c.propertyTargetHandlingRegistry.register(j.recognizer)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_applib,ALLEX.WEB_COMPONENTS.allex_applinkinglib),function(a,b,c,d){"use strict";function e(a,b){g.call(this,a,b),this.$element=null,this._addHook("onShown"),this._addHook("onHidden")}var f=a.lib,g=c.BasicElement;c.resourceFactory,f.q;f.inherit(e,g),e.prototype.__cleanUp=function(){this.$element=null,g.prototype.__cleanUp.call(this)},e.prototype.initialize=function(){if(g.prototype.initialize.call(this),this.$element=d("#"+this.get("id")),!this.$element||!this.$element.length)throw new Error("Unable to find DOM element "+this.get("id"));this.fireInitializationDone(),this.attachHook("onShown",this.getConfigVal("onShown")),this.attachHook("onHidden",this.getConfigVal("onHidden")),this.set_actual(!!this.get("actual"))},e.prototype.set_actual=function(a){return this.$element||(this.actual=a),g.prototype.set_actual.call(this,a)},e.prototype.onUnloaded=function(){this.hide()},e.prototype.onLoaded=function(){this.get("actual")&&this.show()},e.prototype.onLoadFailed=function(){},e.prototype.onLoadProgress=function(){},e.prototype.set_loaded=function(a){if(this.loaded==a)return!1;var b=this.loaded;return this.loaded=a,!a&&b&&this.unload(),!0},e.prototype.resetElement=function(a){var b=this.getConfigVal("reset");f.isFunction(b)&&b(this,a)},e.prototype.show=function(){if(this.$element){var a=this.getConfigVal("visible_class"),b=this.getConfigVal("show_jq_function");if(a&&this.$element.addClass(a),b){if(f.isString(b)&&this.$element[b](),f.isArray(b)){var c=b[0];this.$element[c].apply(this.$element,b.slice(1))}}else this.$element.show();this.fireHook("onShown")}},e.prototype.hide=function(){if(this.$element){var a=this.getConfigVal("visible_class"),b=this.getConfigVal("hide_jq_function");if(a&&this.$element.removeClass(a),b){if(f.isString(b)&&this.$element[b](),f.isArray(b)){var c=b[0];this.$element[c].apply(this.$element,b.slice(1))}}else this.$element.hide();this.fireHook("onHidden")}},e.prototype.getElement=function(a){var b,c;if(0===a.indexOf("$element.")&&(c="#"+a.replace("$element.",""),b=this.$element.find(c)),0===a.indexOf(".$element.")&&(c="#"+a.replace(".$element.",""),b=this.$element.find(c)),b){if(0===b.length)throw new f.Error("JQUERY_FIND_FAILED","jQuery could not find "+c);return b}return a=a.replace(/^\./,""),"$element"===a?this.$element:"."===a?this.getMeAsElement():this.childAtPath(a)},e.prototype.findById=function(a){return"$element"===a?this.$element:g.prototype.findById.call(this,a)},e.prototype.getMeAsElement=function(){return this},e.prototype.findDomReference=function(a){if(!a)throw new Error("No type given");var b=this.id;return jQuery("#references #references_"+b+" #references_"+b+"_"+a)},e.ResourcesSchema={type:"array",items:{type:"object",properties:{type:{type:"string"},name:{type:"string"},options:{type:"object"}},additionalProperties:!1,required:["type","name"]}},b.elements.WebElement=e,c.registerElementType("WebElement",e)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(a,b,c){"use strict";function d(a){h.call(this,a),this.zl=null}var e=a.lib,f=e.qlib,g=e.q,h=c.BasicResourceLoader,i={type:"object",properties:{url:{type:"string"},extractor:{type:"string"},ispermanent:{type:"boolean"}},required:["url"]};e.inherit(d,h),d.prototype.__cleanUp=function(){h.prototype.__cleanUp.call(this)},d.prototype.doLoad=function(){var a=g.defer(),b=this.getConfigVal("extractor"),c=ALLEX.WEB_COMPONENTS["allex_vektr.imageanimations"].ZipLoader;this.zl=new c(b?new RegExp(b):null);var d=this.zl.load(this.getConfigVal("url"));return d.done(console.log.bind(console,"Zip "+this.getConfigVal("url")+" has been unpacked successfully"),console.log.bind(console,"Failed to unpack "+this.getConfigVal("url"))),f.promise2defer(d,a),a},d.prototype.CONFIG_SCHEMA=function(){return i},d.prototype.DEFAULT_CONFIG=function(){return null},d.prototype.get=function(a){return this.zl?this.zl.result.get(a):null},d.prototype.loadOnDemand=function(){return!0},b.resources.AnimatedImageZipLibrary=d,c.registerResourceType("AnimatedImageZipLibrary",d)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib),function(a,b,c,d){"use strict";function e(a){if(g.call(this,f.extend({},a,{ispermanent:!0})),!window.WebFont)throw new Error("No WebFont component loaded, unable to load resource")}var f=a.lib,g=c.BasicResourceLoader,h=f.q,i={type:"object",properties:{urls:{type:"array",items:{type:"string"}},families:{type:"array",items:{type:"string"}},ispermanent:{type:"boolean"}}};f.inherit(e,g),e.prototype.__cleanUp=function(){g.prototype.__cleanUp.call(this)},e.prototype.CONFIG_SCHEMA=function(){return i},e.prototype.DEFAULT_CONFIG=function(){return null},e.prototype.doLoad=function(){var a=h.defer();return d(document).ready(this._go.bind(this,a)),a},e.prototype._go=function(a){WebFont.load({custom:{families:this.getConfigVal("families"),urls:this.getConfigVal("urls")},active:a.resolve.bind(a,"ok")})},b.resources.FontLoader=e,c.registerResourceType("FontLoader",e)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(a,b,c){function d(a){f.call(this,a)}var e=a.lib,f=c.BasicResourceLoader,g=e.q,h={type:"object",properties:{url:{type:"string"}},required:["url"]};e.inherit(d,f),d.prototype.__cleanUp=function(){f.prototype.__cleanUp.call(this)},d.prototype.doLoad=function(){var a=g.defer();return a.resolve(!0),a},d.prototype.DEFAULT_CONFIG=function(){return null},d.prototype.CONFIG_SCHEMA=function(){return h},d.prototype.getFullUrl=function(a,b){var c=this.getConfigVal("url");return c="/"===c.charAt(c.length)?c+a:c+"/"+a},c.registerResourceType("URLGenerator",d)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib),function(a,b,c){"use strict";function d(){this.data=null}var e=a.lib;e.BasicAngularController,e.q;d.prototype.__cleanUp=function(){this.data=null},d.prototype.set_data=function(a){var b=this.getConfigVal("dataHandler");return e.isFunction(b)?b(this.$element,a):this.data!==a&&(this.data=a,!0)},d.prototype.hasDataChanged=function(a){return e.isUndef(a)||a===!0},d.addMethods=function(a){e.inheritMethods(a,d,"set_data","hasDataChanged")},b.mixins.DataElementMixIn=d}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib),function(a,b,c){"use strict";function d(a,b){f.call(this,a,b),g.call(this)}var e=a.lib,f=b.elements.WebElement,g=b.mixins.DataElementMixIn;e.inherit(d,f),g.addMethods(d),d.prototype.__cleanUp=function(){g.prototype.__cleanUp.call(this),f.prototype.__cleanUp.call(this)},b.elements.DataAwareElement=d,c.registerElementType("DataAwareElement",d)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib),function(a,b){"use strict";function c(a,b,c,d){this.element=a,this.onActivated=b,this.onDeactivated=c,this.deactivate(),this.router=d}function d(a){this.default_page=null,this.pagesmap=new g.Map,this.page=null,this.container=a,i.call(this)}function e(a){return"#universal#"+a+"#page"}function f(){this.role_router=new d,this.role=null,this.active_router=null,this._role_monitor=null,this._user_state_monitor=null,this.role_datasource=null}var g=a.lib,h="#norole#page#",i=g.CLDestroyable;c.prototype.destroy=function(){this.element=null,this.onDeactivated=null,this.onActivated=null,this.router.destroy(),this.router=null},c.prototype.activate=function(){this.element.set("actual",!0),g.isFunction(this.onActivated)&&this.onActivated(this.element),this.router&&this.router.reset()},c.prototype.deactivate=function(){this.element.set("actual",!1),this.router&&this.router.clear(),g.isFunction(this.onDeactivated)&&this.onDeactivated(this.element)},c.prototype.gotoSubPage=function(a){this.router&&(a?this.router.set("page",a):this.router.reset())},g.inherit(d,i),d.prototype.__cleanUp=function(){this.container=null,this.default_page=null,this.page=null,g.container.destroyAll(this.pagesmap),this.pagesmap.destroy(),this.pagesmap=null,i.prototype.__cleanUp.call(this)},d.prototype.addPage=function(a,b,d,e,f){this.pagesmap.add(a,new c(b,d,e,f))},d.prototype._doDeactivate=function(a,b,c){c!==a&&b&&b.deactivate()},d.prototype.set_page=function(a){if(this.page===a)return!1;this.page=a;var b=null,c=0,d=null;a&&(b=a.split("/"),c=b.shift(),d=b.join("/")),this.pagesmap.traverse(this._doDeactivate.bind(this,c));var e=this.pagesmap.get(c);return e?(e.activate(),e.gotoSubPage(d),!0):void 0},d.prototype.reset=function(){this.set("page",this.default_page)},d.prototype.clear=function(){this.set("page",null),this.container&&this.container.set("actual",!1)},g.inherit(f,d),f.prototype.destroy=function(){this._user_state_monitor&&this._user_state_monitor.destroy(),this._user_state_monitor=null,this._role_monitor&&this._role_monitor.destroy(),this.role_datasource=null,this.active_router=null,this.role=null,this.role_router.destroy(),this.role_router=null},f.prototype.addNoRolePage=function(a,b,c,d){this.role_router.addPage(h,a,b,c,d)},f.prototype.addUniversalRolePage=function(a,b,c,d,f){var g=e(a);this.role_router.addPage(g,b,c,d,f)},f.prototype.addRolePage=function(a,b,c,d,e){this.role_router.addPage(a,b,c,d,e)},f.prototype._prepareActiveRouter=function(a){if(this.active_router&&this.active_router.clear(),a){var b=this.role_router.pagesmap.get(a);this.active_router=b?b.router:null}else this.active_router=null;this.active_router&&this.active_router.reset()},f.prototype.gotoUniversalRolePage=function(a){return this.role?void this._prepareActiveRouter(e(a)):void console.warn("going to universal page ",a,"with no role set ... no can do ...")},f.prototype.setRole=function(a){this.role=a,this._prepareActiveRouter(a),this.role_router.set("page",a?a:h)},f.prototype.resetToRole=function(){this.setRole(this.role)},f.prototype.setPageInRole=function(a){return this.active_router?void(this.active_router&&this.active_router.set("page",a)):void console.warn("No active router for role "+this.role+"?","No can do ...")},f.prototype._listenRole=function(){this._role_monitor&&this._role_monitor.destroy(),this._role_monitor=this.role_datasource.attachListener("data",this.setRole.bind(this))},f.prototype.setRoleMonitor=function(a){this.role_datasource=a},f.prototype.setApp=function(a,b){a.environments.listenFor(b,this._onEnv.bind(this))},f.prototype._onEnv=function(a){return a?void(this._user_state_monitor=a.attachListener("state",this._onStatusChanged.bind(this))):(this._role_monitor&&this._role_monitor.destroy(),this._role_monitor=null,this._user_state_monitor&&this._user_state_monitor.destroy(),this._user_state_monitor=null,void this.setRole(null))},f.prototype._onStatusChanged=function(a){return"established"===a?void this._listenRole():(this._role_monitor&&this._role_monitor.destroy(),this._role_monitor=null,void(null!==this.role&&this.setRole(null)))},b.Router=d,b.RoleRouter=new f}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent.misc);