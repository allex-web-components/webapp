!function(e,t,i){"use strict";var r=e.lib,n=i.eventEmitterHandlingRegistry.EventEmitterHandler,o=i.propertyTargetHandlingRegistry.PropertyTargetHandler;function s(e,t){n.call(this,e,t),this.name=t,this.listener=null}function l(e,t){n.call(this,e,t),this.name=t,this.listener=null}function a(e,t){o.call(this,e,t);var i=t.split(".");this.method="class"===i[0]?"addClass":i[0],this.removeMethod=this._chooseRemover(),this.prop=i[1]}function p(e){o.call(this,e,this.propertyName)}function c(e){p.call(this,e)}function h(e){p.call(this,e)}function u(e){p.call(this,e)}r.inherit(s,n),s.prototype.destroy=function(){this.listener&&this.emitter.off(this.name,this.listener),this.listener=null,this.name=null,n.prototype.destroy.call(this)},s.prototype.raiseEvent=function(){this.emitter.trigger.call(this.emitter,this.name,Array.prototype.slice.call(arguments))},s.prototype.listenToEvent=function(e){if(!this.listener)return this.listener=e,"change"===this.name?this.emitter.on(this.name,this._handleChange.bind(this,e)):this.emitter.on(this.name,e),this},s.prototype._handleChange=function(e,t){e(jQuery(t.target).val())},s.recognizer=function(e){if(e&&e.emitter&&e.emitter.is&&e.emitter.is("input")&&r.isFunction(e.emitter.on)&&r.isFunction(e.emitter.off)&&r.isFunction(e.emitter.bind)&&r.isFunction(e.emitter.unbind)&&r.isFunction(e.emitter.trigger))return s},i.eventEmitterHandlingRegistry.register(s.recognizer),r.inherit(l,n),l.prototype.destroy=function(){this.listener&&this.emitter.off(this.name,this.listener),this.listener=null,this.name=null,n.prototype.destroy.call(this)},l.prototype.raiseEvent=function(){this.emitter.trigger.call(this.emitter,this.name,Array.prototype.slice.call(arguments))},l.prototype.listenToEvent=function(e){if(!this.listener)return this.listener=e,this.emitter.on(this.name,function(e){e(Array.prototype.slice.call(arguments,1))}.bind(null,e)),this},l.recognizer=function(e){if(e&&e.emitter&&r.isFunction(e.emitter.on)&&r.isFunction(e.emitter.off)&&r.isFunction(e.emitter.bind)&&r.isFunction(e.emitter.unbind)&&r.isFunction(e.emitter.trigger))return l},i.eventEmitterHandlingRegistry.register(l.recognizer),r.inherit(a,o),a.prototype.destroy=function(){this.removeMethod=null,this.method=null,this.prop=null,this.method=null,o.prototype.destroy.call(this)},a.prototype._chooseRemover=function(){switch(this.method){case"attr":return"removeAttr";case"class":return"removeClass";case"prop":return"removeProp";case"css":return"css"}},a.prototype.handle=function(e){this.carrier[r.isUndef(e)?this.removeMethod:this.method](this.prop,e)},a.recognizer=function(e){var t=e.name.split(".");if("attr"===t[0]||"css"===t[0]||"prop"===t[0]||"class"===t[0])return e&&e.carrier&&r.isFunction(e.carrier.on)&&r.isFunction(e.carrier.off)&&r.isFunction(e.carrier.bind)&&r.isFunction(e.carrier.unbind)&&r.isFunction(e.carrier.trigger)?a:void 0},i.propertyTargetHandlingRegistry.register(a.recognizer),r.inherit(p,o),p.prototype.handle=function(e){this.carrier[this.propertyName](e)},r.inherit(c,p),c.prototype.propertyName="val",c.recognizer=function(e){if("val"===e.name)return c},i.propertyTargetHandlingRegistry.register(c.recognizer),r.inherit(h,p),h.prototype.propertyName="text",h.recognizer=function(e){if("text"===e.name)return h},i.propertyTargetHandlingRegistry.register(h.recognizer),r.inherit(u,p),u.prototype.propertyName="html",u.recognizer=function(e){if("html"===e.name)return u},i.propertyTargetHandlingRegistry.register(u.recognizer)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_applib,ALLEX.WEB_COMPONENTS.allex_applinkinglib),function(e,t,i,r){"use strict";var n=e.lib,o=i.BasicElement;i.resourceFactory,n.q;function s(e,t){o.call(this,e,t),this.$element=null,this._addHook("onPreShow"),this._addHook("onPreHide"),this._addHook("onShown"),this._addHook("onHidden"),this._helpers=null;var i=this.getConfigVal("helperObjects");for(var r in i)this.assignHelperObj(r,i[r])}n.inherit(s,o),s.prototype.__cleanUp=function(){this._helpers&&(n.container.destroyAll(this._helpers),this._helpers.destroy()),this._helpers=null,this.$element=null,o.prototype.__cleanUp.call(this)},s.prototype.assignHelperObj=function(e,t){this._helpers||(this._helpers=new n.Map),this._helpers.add(e,t)},s.prototype.getHelperObj=function(e){return this._helpers.get(e)},s.prototype.initialize=function(){if(o.prototype.initialize.call(this),this.$element=r("#"+this.get("id")),!this.$element||!this.$element.length)throw new Error("Unable to find DOM element "+this.get("id"));this.fireInitializationDone(),this.attachHook("onPreShow",this.getConfigVal("onPreShow")),this.attachHook("onPreHide",this.getConfigVal("onPreHide")),this.attachHook("onShown",this.getConfigVal("onShown")),this.attachHook("onHidden",this.getConfigVal("onHidden")),this.set_actual(!!this.get("actual"))},s.prototype.set_actual=function(e){return this.$element||(this.actual=e),o.prototype.set_actual.call(this,e)},s.prototype.onUnloaded=function(){this.hide()},s.prototype.onLoaded=function(){this.get("actual")&&this.show()},s.prototype.onLoadFailed=function(){},s.prototype.onLoadProgress=function(){},s.prototype.set_loaded=function(e){if(this.loaded==e)return!1;var t=this.loaded;return this.loaded=e,!e&&t&&this.unload(),!0},s.prototype.resetElement=function(e){var t=this.getConfigVal("reset");n.isFunction(t)&&t(this,e)},s.prototype.show=function(){if(this.$element){this.fireHook("onPreShow",[this]);var e=this.getConfigVal("visible_class"),t=this.getConfigVal("show_jq_function");if(e&&this.$element.addClass(e),t){if(n.isString(t)&&this.$element[t](),n.isArray(t)){var i=t[0];this.$element[i].apply(this.$element,t.slice(1))}}else this.$element.show();this.fireHook("onShown",[this])}},s.prototype.hide=function(){if(this.$element){this.fireHook("onPreHide",[this]);var e=this.getConfigVal("visible_class"),t=this.getConfigVal("hide_jq_function");if(e&&this.$element.removeClass(e),t){if(n.isString(t)&&this.$element[t](),n.isArray(t)){var i=t[0];this.$element[i].apply(this.$element,t.slice(1))}}else this.$element.hide();this.fireHook("onHidden")}},s.prototype.getElement=function(e){var t,i;if(0===e.indexOf("$element.")&&(i=e.replace("$element.","")),0===e.indexOf(".$element.")&&(i=e.replace(".$element.","")),i&&(t=this.$element.find(i)),t){if(0===t.length)throw new n.Error("JQUERY_FIND_FAILED","jQuery could not find "+i);return t}return"$element"===(e=e.replace(/^\./,""))?this.$element:"."===e?this.getMeAsElement():this.childAtPath(e)},s.prototype.findById=function(e){return"$element"===e?this.$element:o.prototype.findById.call(this,e)},s.prototype.getMeAsElement=function(){return this},s.prototype.findDomReference=function(e){if(!e)throw new Error("No type given");var t=this.id;return jQuery("#references #references_"+t+" #references_"+t+"_"+e)},s.prototype.raiseEvent=function(){this.$element.trigger.apply(this.$element,arguments)},s.ResourcesSchema={type:"array",items:{type:"object",properties:{type:{type:"string"},name:{type:"string"},options:{type:"object"}},additionalProperties:!1,required:["type","name"]}},t.elements.WebElement=s,i.registerElementType("WebElement",s)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(e,t,i){"use strict";var r=e.lib,n=r.qlib,o=r.q,s=i.BasicResourceLoader,l={type:"object",properties:{url:{type:"string"},extractor:{type:"string"},ispermanent:{type:"boolean"}},required:["url"]};function a(e){s.call(this,e),this.zl=null}r.inherit(a,s),a.prototype.__cleanUp=function(){s.prototype.__cleanUp.call(this)},a.prototype.doLoad=function(){var e=o.defer(),t=this.getConfigVal("extractor"),i=ALLEX.WEB_COMPONENTS["allex_vektr.imageanimations"].ZipLoader;this.zl=new i(t?new RegExp(t):null);var r=this.zl.load(this.getConfigVal("url"));return n.promise2defer(r,e),e},a.prototype.doUnload=function(){var e=o.defer();return this.zl.destroy(),this.zl=null,e},a.prototype.CONFIG_SCHEMA=function(){return l},a.prototype.DEFAULT_CONFIG=function(){return null},a.prototype.get=function(e){return this.zl?this.zl.result.get(e):null},a.prototype.loadOnDemand=function(){return!0},t.resources.AnimatedImageZipLibrary=a,i.registerResourceType("AnimatedImageZipLibrary",a)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib),function(e,t,i,r){"use strict";var n=e.lib,o=i.BasicResourceLoader,s=n.q,l={type:"object",properties:{urls:{type:"array",items:{type:"string"}},families:{type:"array",items:{type:"string"}},ispermanent:{type:"boolean"}}};function a(e){if(o.call(this,n.extend({},e,{ispermanent:!0})),!window.WebFont)throw new Error("No WebFont component loaded, unable to load resource")}n.inherit(a,o),a.prototype.__cleanUp=function(){o.prototype.__cleanUp.call(this)},a.prototype.CONFIG_SCHEMA=function(){return l},a.prototype.DEFAULT_CONFIG=function(){return null},a.prototype.doLoad=function(){var e=s.defer();return r(document).ready(this._go.bind(this,e)),e},a.prototype._go=function(e){WebFont.load({custom:{families:this.getConfigVal("families"),urls:this.getConfigVal("urls")},active:e.resolve.bind(e,"ok")})},t.resources.FontLoader=a,i.registerResourceType("FontLoader",a)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(e,t,i){var r=e.lib,n=i.BasicResourceLoader,o=r.q,s={type:"object",properties:{url:{type:"string"}},required:["url"]};function l(e){n.call(this,e)}r.inherit(l,n),l.prototype.__cleanUp=function(){n.prototype.__cleanUp.call(this)},l.prototype.doLoad=function(){var e=o.defer();return e.resolve(!0),e},l.prototype.DEFAULT_CONFIG=function(){return null},l.prototype.CONFIG_SCHEMA=function(){return s},l.prototype.getFullUrl=function(e,t){var i=this.getConfigVal("url");return i="/"===i.charAt(i.length)?i+e:i+"/"+e},i.registerResourceType("URLGenerator",l)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib),function(e,t,i){"use strict";var r=e.lib;r.BasicAngularController,r.q;function n(){this.data=null,this.busy=!1}n.prototype.__cleanUp=function(){this.data=null,this.busy=null},n.prototype.set_data=function(e){var t=this.getConfigVal("dataHandler");return r.isFunction(t)?t(this.$element,e):this.data!==e&&(this.data=e,!0)},n.prototype.hasDataChanged=function(e){return r.isUndef(e)||!0===e},n.prototype.set_busy=function(e){this.busy=e,console.log(this.get("id"),"reported busy",e)},n.addMethods=function(e){r.inheritMethods(e,n,"set_data","hasDataChanged","set_busy")},t.mixins.DataElementMixIn=n}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib),function(e,t,i){"use strict";var r=e.lib,n=t.elements.WebElement,o=t.mixins.DataElementMixIn;function s(e,t){n.call(this,e,t),o.call(this)}r.inherit(s,n),o.addMethods(s),s.prototype.__cleanUp=function(){o.prototype.__cleanUp.call(this),n.prototype.__cleanUp.call(this)},t.elements.DataAwareElement=s,i.registerElementType("DataAwareElement",s)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib),function(e,t,i,r){"use strict";var n=e.lib,o=i.BasicElement,s=i.BasicModifier,l=i.BasicProcessor,a=i.misc,p=n.q;function c(e,t){this.container=e,this.desc=t,this.prepareData=t.prepareData||null,this.defer=null}function h(e,t,i){c.call(this,e,i),this.ftion=t,n.isFunction(this.prepareData)||(this.prepareData=this._defaultDataPrepare.bind(this))}function u(e,t,i){c.call(this,e,i),this.element=t}function f(e,t){o.call(this,e,t),this.items=null,this.values=null,this.index=null}function d(e){s.call(this,e)}function y(){l.call(this)}c.prototype.destroy=function(){this.prepareData=null,this.desc=null,this.container=null,this.defer=null},c.prototype.isExpecting=function(){return!!this.defer},c.prototype._actualStart=function(e){var t=this._doStart(e);return t.done(this.doOnSuccess.bind(this),this.doOnError.bind(this)),t},c.prototype._onPrepareDataFunction=function(e){return e().then(this._actualStart.bind(this))},c.prototype._onPrepareDataPromise=function(e){return e.then(this._actualStart.bind(this))},c.prototype.start=function(e,t,i){var r=n.isFunction(this.prepareData)?this.prepareData(e,t,i):e;return n.isFunction(r)?this._onPrepareDataFunction(r):n.isFunction(r.then)?this._onPrepareDataPromise(r):this._actualStart(r)},c.prototype.doOnSuccess=function(e){this.container._reportDone(e),n.isFunction(this.desc.onSuccess)&&this.desc.onSuccess.apply(null,this.getSuccessArgs(e))},c.prototype.doOnError=function(e){this.container._reportFailed(e),n.isFunction(this.desc.onError)&&this.desc.onError.apply(null,this.getErrorArgs(e))},c.prototype.getErrorArgs=function(e){return[e,this.container.values]},c.prototype.getSuccessArgs=function(e){return[e,this.container.values]},c.prototype._doStart=n.dummyFunc,n.inherit(h,c),h.prototype.destroy=function(){this.ftion=null,c.prototype.destroy.call(this)},h.prototype._doStart=function(e){return this.ftion.apply(null,e)},h.prototype._defaultDataPrepare=function(e,t,i){return[e]},n.inherit(u,c),u.prototype.destroy=function(){this.element=null,c.prototype.destroy.call(this)},u.prototype.getErrorArgs=function(e){return[this.element,e,this.container.values]},u.prototype.getSuccessArgs=function(e){return[this.element,e,this.container.values]},u.prototype.start=function(e,t,i){return n.isFunction(this.desc.onStart)&&this.desc.onStart(this.element,e,i),c.prototype.start.apply(this,arguments)},u.prototype._doStart=function(){return this.defer=p.defer(),this.defer.promise},u.prototype.onFailed=function(e){if(!this.defer)throw new Error("Not expecting resolution");var t=this.defer;this.defer=null,t.reject(e),t=null},u.prototype.onSuccess=function(e){if(!this.defer)throw new Error("Not expecting resolution");var t=this.defer;this.defer=null,t.resolve(e),t=null},n.inherit(f,o),f.prototype.__cleanUp=function(){this.index=null,this.values=null,this.forceStop(),n.arryDestroyAll(this.items),this.items=null,o.prototype.__cleanUp.call(this)},f.prototype.init=function(e){this.items=new Array(e.length)},f.prototype.getCurrent=function(){return this.items[this.get("index")]},f.prototype.stop=function(){this.set("actual",!1)},f.prototype._assignIndex=function(e,t,i){n.isFunction(i)?this.items[e]=new h(this,i,t):this.items[e]=new u(this,i,t)},f.prototype.set_actual=function(e){if(!!e===this.actual)return!1;o.prototype.set_actual.call(this,!!e),e&&(this.values=[e],this.next())},f.prototype.next=function(){if(this.values){var e=this.values.length-1;this.set("index",e);var t=this.getCurrent();t?t.start(this.values[e],this.get("index"),this.values).done(this.next.bind(this),this.stop.bind(this)):this.stop()}},f.prototype._reportDone=function(e){this.values.push(e)},f.prototype._reportFailed=function(e){this.values.push(e)},f.prototype.onDone=function(e){this.getCurrent().onSuccess(e)},f.prototype.onFailed=function(e){this.getCurrent().onFailed(e)},t.elements.Pipeline=f,i.registerElementType("Pipeline",f),n.inherit(d,s),d.prototype.__cleanUp=function(){s.prototype.__cleanUp.call(this)},d.prototype.doProcess=function(e,t,i,r,n){var o,s,l=this.getConfigVal("element_name"),a=this.getConfigVal("pipeline"),p=(e?"":"element")+"."+l,c=[];c.push({triggers:".!ready",references:p,handler:this._initialize.bind(this,a)});for(var h=0;h<a.length;h++){if(o=a[h],c.push({name:"test_ready",triggers:".!ready",references:[o.element,p].join(","),handler:this._onParentReady.bind(this,o,h)}),(s=o.element.indexOf(">")<0)&&(!o.success||!o.error))throw new Error("For object config we need success and error triggers");s&&c.push({triggers:o.element+o.success,references:[o.element,p].join(","),handler:this._onElementSuccess.bind(this,h,o.successCheck)},{triggers:o.element+o.error,references:[o.element,p].join(","),handler:this._onElementError.bind(this,h,o.errorCheck)})}Array.prototype.push.apply(r,c)},d.prototype._onElementError=function(e,t,i,r){if(r.get("index")===e&&r.getCurrent().isExpecting()){var o=Array.prototype.slice.call(arguments,4);n.isFunction(t)&&!t.apply(null,o)||r.onFailed(o)}},d.prototype._onElementSuccess=function(e,t,i,r){if(r.get("index")===e&&r.getCurrent().isExpecting()){var o=Array.prototype.slice.call(arguments,4);n.isFunction(t)&&!t(o)||r.onDone(o)}},d.prototype._initialize=function(e,t){t.init(e)},d.prototype._onParentReady=function(e,t,i,r){r._assignIndex(t,e,i)},d.prototype.DEFAULT_CONFIG=function(){return null},n.inherit(y,l),y.prototype.destroy=function(){l.prototype.destroy.call(this)},y.prototype.process=function(e){a.traverseElements(e,this._processElement.bind(this))},y.prototype._processElement=function(e){if(e.modifiers){var t=a.findModifier(e,"Pipeline");if(t){a.initAll(e);for(var i,r=a.getElementsArr(e),n=0;n<t.length;n++)i={name:t[n].options.element_name?t[n].options.element_name:e.name?e.name+"_pipeline_"+n:"_pipeline_"+n,type:"Pipeline"},t[n].options.element_name=i.name,r.push(i)}}},i.registerModifier("Pipeline",d),i.registerPreprocessor("Pipeline",y)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(e,t,i,r){"use strict";var n=e.lib,o=i.BasicModifier;function s(e){o.call(this,e)}function l(e){n.extend(e||{},{attributeVal:"data-route"}),s.call(this,e)}n.inherit(s,o),s.prototype.destroy=function(){o.prototype.destroy.call(this)},s.prototype.ALLOWED_ON=function(){return null},s.prototype.DEFAULT_CONFIG=function(){return{attributeVal:null,evntValProcessor:null}},s.prototype.doProcess=function(e,t,i,r,n){var o=[{triggers:".$element."+this.getConfigVal("selector")+"!click",references:".",handler:this._onClicked.bind(this,this.getConfigVal("attributeVal"),this.getConfigVal("evntValProcessor"))}];Array.prototype.push.apply(r,o)},s.prototype._onClicked=function(e,t,i,o){var s=n.isArray(o)?o[0].currentTarget:o.currentTarget,l=this.getRaiseValue(r(s),e,t);void 0!==l&&i.raiseEvent("onSelected",l)},s.prototype.getRaiseValue=function(e,t,i){return t?e.attr(t):i?i(e):e},i.registerModifier("Selector",s),n.inherit(l,s),l.prototype.__cleanUp=function(){s.prototype.__cleanUp.call(this)},l.prototype.DEFAULT_CONFIG=function(){return n.extend(s.prototype.DEFAULT_CONFIG(),{selector:"ul li a",attributeVal:"data-route"})},i.registerModifier("RouteController",l),t.modifiers.Selector=s}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(e,t){"use strict";var i=e.lib,r=i.CLDestroyable;function n(e,t,i,r){this.element=e,this.onActivated=t,this.onDeactivated=i,this.deactivate(),this.router=r}function o(){this.default_page=null,this.pagesmap=new i.Map,this.page=null}function s(e){o.call(this,e),this.container=e,r.call(this)}function l(e){return"#universal#"+e+"#page"}function a(){this.role_router=new s,this.role=null,this.active_router=null,this.isonline=!1}n.prototype.destroy=function(){this.element=null,this.onDeactivated=null,this.onActivated=null,this.router.destroy(),this.router=null},n.prototype.activate=function(){this.element.set("actual",!0),i.isFunction(this.onActivated)&&this.onActivated(this.element),this.router&&this.router.reset()},n.prototype.deactivate=function(){this.element.set("actual",!1),this.router&&this.router.clear(),i.isFunction(this.onDeactivated)&&this.onDeactivated(this.element)},n.prototype.gotoSubPage=function(e){this.router&&(e?this.router.set("page",e):this.router.reset())},o.prototype.__cleanUp=function(){this.default_page=null,this.page=null,i.container.destroyAll(this.pagesmap),this.pagesmap.destroy(),this.pagesmap=null},o.prototype.addPage=function(e,t,i,r,o){this.pagesmap.add(e,new n(t,i,r,o))},o.prototype._doDeactivate=function(e,t,i){i!==e&&t&&t.deactivate()},o.prototype.set_page=function(e){if(this.page===e)return!1;this.page=e;var t=null,i=0,r=null;e&&(i=(t=e.split("/")).shift(),r=t.join("/")),this.pagesmap.traverse(this._doDeactivate.bind(this,i));var n=this.pagesmap.get(i);return n?(n.activate(),n.gotoSubPage(r),!0):void 0},o.prototype.reset=function(){this.set("page",this.default_page)},o.prototype.clear=function(){this.set("page",null),this.getContainer()&&this.getContainer().set("actual",!1)},o.addMethods=function(e){i.inheritMethods(e,o,"clear","reset","set_page","_doDeactivate","addPage")},i.inherit(s,r),o.addMethods(s),s.prototype.__cleanUp=function(){this.container=null,o.prototype.__cleanUp.call(this),r.prototype.__cleanUp.call(this)},s.prototype.getContainer=function(){return this.container},i.inherit(a,s),a.prototype.destroy=function(){this.isonline=null,this.active_router=null,this.role=null,this.role_router.destroy(),this.role_router=null},a.prototype.addNoRolePage=function(e,t,i,r){this.role_router.addPage("#norole#page#",e,t,i,r)},a.prototype.addUniversalRolePage=function(e,t,i,r,n){var o=l(e);this.role_router.addPage(o,t,i,r,n)},a.prototype.addRolePage=function(e,t,i,r,n){this.role_router.addPage(e,t,i,r,n)},a.prototype._prepareActiveRouter=function(e){if(this.active_router&&this.active_router.clear(),e){var t=this.role_router.pagesmap.get(e);this.active_router=t?t.router:null}else this.active_router=null;this.active_router&&this.active_router.reset()},a.prototype.gotoUniversalRolePage=function(e){this.role?this._prepareActiveRouter(l(e)):console.warn("going to universal page ",e,"with no role set ... no can do ...")},a.prototype.setRole=function(e){this.role=e,this.online?(this._prepareActiveRouter(e),this.role_router.set("page",e||null)):this._prepareActiveRouter(null)},a.prototype.resetToRole=function(){this.setRole(this.role)},a.prototype.setPageInRole=function(e){this.active_router?this.active_router&&this.active_router.set("page",e):console.warn("No active router for role "+this.role+"?","No can do ...")},a.prototype._onStatusChanged=function(e){this.online="established"===e,this.setRole(this.online?this.role:null)},t.RouterMixIn=o,t.Router=s,t.RoleRouter=a}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent.misc),function(e,t,i,r){"use strict";var n=e.lib,o=i.BasicElement,s=(i.BasicModifier,i.BasicProcessor);i.misc,n.q;function l(e,i){o.call(this,e,i),this.role_router=new t.misc.RoleRouter,this.path_prefix=null,this.path=null}function a(e,t,i){e.role_router._onStatusChanged(i),"established"===i?e.role_router.setRole(t):e.role_router.setRole(null),e._checkInitialPath()}function p(){s.call(this)}n.inherit(l,o),l.prototype.__cleanUp=function(){this.path_prefix=null,this.path=null,this.role_router.destroy(),this.role_router=null,o.prototype.__cleanUp.call(this)},l.prototype.gotoPage=function(e){this.role_router.setPageInRole(e),this.set("path",e)},l.prototype.gotoUniversalRolePage=function(e){this.role_router.gotoUniversalRolePage.apply(this.role_router,arguments),this.set("path_prefix",e),this.set("path",this.role_router.active_router.default_page)},l.prototype.resetToRole=function(){this.role_router.resetToRole.apply(this.role_router,arguments),this.set("path_prefix",null),this.set("path",this.role_router.active_router.default_page)},l.prototype.set_path=function(e){this.path=e},l.prototype._checkInitialPath=function(){this.role_router.role&&this.role_router.online&&this.set("path",this.role_router.active_router.default_page)},i.registerElementType("RoleRouterElement",l),n.inherit(p,s),p.prototype.destroy=function(){s.prototype.destroy.call(this)},p.prototype.processRoleRouter=function(e,t,i){if(!t.sttusSource)throw new Error("Missing sttusSource");if(!t.roleSource)throw new Error("Missing roleSource");var r=e+"_router";i.elements.push({name:r,type:"RoleRouterElement"}),i.logic.push({triggers:t.roleSource+","+t.sttusSource,references:"element."+r,handler:a}),t.roles&&n.traverseShallow(t.roles,this.processRole.bind(this,i.logic,"element."+r)),t.anyRole&&n.traverseShallow(t.anyRole,this.processAnyRole.bind(this,i.logic,"element."+r))},p.prototype.processAnyRole=function(e,i,r,n){if(r){var o=Object.keys(r.pages);e.push({triggers:".!ready",references:[i,r.container].concat(o).join(","),handler:function(e,i,r,n,o){for(var s=Array.prototype.slice.call(arguments,5,5+i.length),l=new t.misc.Router(o),a=0;a<i.length;a++)l.addPage(e.pages[i[a]],s[a]);l.default_page=e.default_page,n.role_router.addUniversalRolePage(r,o,null,null,l)}.bind(null,r,o,n)})}},p.prototype.processRole=function(e,i,r,n){if(r.pages){var o=[i,r.container],s=Object.keys(r.pages);Array.prototype.push.apply(o,s),e.push({triggers:".!ready",references:o.join(","),handler:function(e,i,r,n,o){var s=r.length,l=Array.prototype.slice.call(arguments,5,5+s),a=new t.misc.Router(o);for(var p in r)a.addPage(i.pages[r[p]],l[p]);a.default_page=i.default_page,n.role_router.addRolePage(e,o,null,null,a)}.bind(null,n,r,s)})}else console.warn("No page for role ",n)},p.prototype.process=function(e){for(var t in this.config)this.processRoleRouter(t,this.config[t],e)},i.registerPreprocessor("RoleRouter",p)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(e,t,i,r){"use strict";var n=e.lib,o=i.BasicElement,s=(i.BasicModifier,i.BasicProcessor),l=t.misc.RouterMixIn;i.misc,n.q;function a(e,t){o.call(this,e,t),l.call(this)}function p(){s.call(this)}n.inherit(a,o),l.addMethods(a),a.prototype.__cleanUp=function(){l.prototype.__cleanUp.call(this),o.prototype.__cleanUp.call(this)},a.prototype._doInitializeView=function(e,t,i,r,n,o){this.default_page=r;for(var s=0;s<e.length;s++)this.addPage(i[e[s]],t[s]);(!o||o&&n.get("actual"))&&this.reset()},a.prototype.getContainer=function(){return null},i.registerElementType("TabViewElement",a),n.inherit(p,s),p.prototype.destroy=function(){s.prototype.destroy.call(this)},p.prototype.process=function(e){for(var t in this.config)this.createTabView(t,this.config[t],e)},p.prototype.createTabView=function(e,t,i){if(!t.tabs)throw new Error("No tabs record in config for tab view ",e);"bind_actual"in t||(t.bind_actual=!0);var r=["element."+e+"_tab_view",t.selector];i.elements.push({name:e+"_tab_view",type:"TabViewElement",options:{toggle:t.toggle||!1}});var n=Object.keys(t.tabs);Array.prototype.push.apply(r,n),i.logic.push({triggers:".!ready",references:r.join(","),handler:this._initializeElement.bind(this,e,t,n)}),t.bind_actual&&i.logic.push({triggers:t.selector+":actual",references:r.join(","),handler:this._onSelectorActual.bind(this,e,t,n)}),t.selector&&i.logic.push({triggers:t.selector+".$element!onSelected",references:r[0],handler:this._onSelected.bind(this)})},p.prototype._onSelectorActual=function(e,t,i,r,o){var s=Array.prototype.slice.call(arguments,5);if(arguments[5+i.length]){r.reset();var l=r.get("page");r.set("page",null),this._onSelected(r,null,l)}else s.forEach(n.doMethod.bind(null,"set",["actual",!1]))},p.prototype._initializeElement=function(e,t,i,r,n){var o=Array.prototype.slice.call(arguments,5);r._doInitializeView(i,o,t.tabs,t.default_tab||null,n,t.bind_actual)},p.prototype._onSelected=function(e,t,i){(i=n.isArray(t)&&t.length>1?t[1]:i)===e.get("page")&&e.getConfigVal("toggle")?e.clear():e.set("page",i)},i.registerPreprocessor("TabView",p)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(e,t,i,r){"use strict";var n=e.lib,o=i.BasicProcessor,s=i.misc;n.q;function l(){o.call(this),this.elements=[]}function a(e){return n.isString(e)?e:e.name}n.inherit(l,o),l.prototype.destroy=function(){this.elements=null,o.prototype.destroy.call(this)},l.prototype.configure=function(e){o.prototype.configure.call(this,e)},l.prototype.process=function(e){if(this.config){if(!this.config.state)throw new Error("No state field in config");if(!this.config.elements)throw new Error("No elements field in config");s.traverseElements(e,this._onElement.bind(this),["element"]),e.logic.push({triggers:this.config.state,references:this.elements.join(","),handler:function(){var e=Array.prototype.slice.call(arguments);"established"!==e.pop()&&e.forEach(n.doMethod.bind(null,"set",["actual",!1]));e=null}.bind(this)})}},l.prototype._onElement=function(e,t){var i=t.join(".");this._match(e,i)&&this.elements.push(i)},l.prototype._match=function(e,t){for(var i=null,r=0;r<this.config.elements.length;r++){if(i=this.config.elements[r],n.isString(i)&&t===i)return!0;if(i.type===e.type){if(!i.modifiers)return!0;if(e.modifiers&&n.arryOperations.intersect(i.modifiers,e.modifiers.map(a)).filter(n.isString).length)return!0}}return!1},i.registerPreprocessor("LogoutDeactivator",l)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(e,t,i,r){"use strict";var n=e.lib,o=i.BasicProcessor;function s(){o.call(this)}n.inherit(s,o),s.prototype.process=function(e){this.config&&this.config.views&&n.traverseShallow(this.config.views,this._processView.bind(this,e))},s.prototype._applyRowEventLogic=function(e,t,r,n){if(i.misc.initLogic(e),!r.handler)throw new Error("DataView "+t+"has no event handler for event "+n);if(!r.references)throw new Error("DataView "+t+"has no references for event "+n);e.logic.push({triggers:"element."+t+".$element!"+n,references:r.references,handler:r.handler})},s.prototype._applyRowEventLink=function(e,t,r,n){i.misc.initLinks(e),e.links.push({source:"element."+t+".$element!"+n,target:r.target,filter:r.filter})},s.prototype._processRowEvent=function(e,t,i,r){if(i.handler&&i.references)return this._applyRowEventLogic(e,t,i,r);if(i.target)return this._applyRowEventLink(e,t,i,r);throw new Error("Unknow event handler for _processRowEvent: "+r+" in "+t)},s.prototype._processView=function(e,t,r){var o=r.split("."),s=o.pop(),l=i.misc.findElement(e,o.join(".")),a=t.type||this.config.defaults.view_type;if(i.misc.findElement(l,s))throw new Error("Element on path "+r+" already exists");i.misc.initElements(l),l.options.elements.push({name:s,type:a,options:n.extend({},this.config.defaults[a],t.config)}),t.rowEvents&&n.traverseShallow(t.rowEvents,this._processRowEvent.bind(this,e,r))},i.registerPreprocessor("DataView",s)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery),function(e,t,i,r){"use strict";var n=e.lib,o=i.BasicElement,s=i.BasicProcessor;function l(e,t){o.call(this,e,t),this.onUp=new n.HookCollection,n.traverseShallow(t.events.up,function(e,t,i,n){r(e).jkey(n,t.fire.bind(t,{key:n,value:i}))}.bind(null,t.selector||document,this.onUp))}function a(){s.call(this)}n.inherit(l,o),l.prototype.__cleanUp=function(){this.onUp.destroy(),this.onUp=null,o.prototype.__cleanUp.call(this)},l.prototype.initialize=function(){o.prototype.initialize.call(this)},i.registerElementType("KeyboardInputElement",l),n.inherit(a,s),a.prototype.process=function(e){if(this.config){if(!this.config.element_name)throw new Error("No element input");if(!this.config.events)throw new Error("No events listed");e.elements.push({name:this.config.element_name,type:"KeyboardInputElement",options:{events:this.config.events}})}},i.registerPreprocessor("KeyboardController",a)}(ALLEX,ALLEX.WEB_COMPONENTS.allex_web_webappcomponent,ALLEX.WEB_COMPONENTS.allex_applib,jQuery);